import{Q as C}from"./QSpace-ddeb61a4.js";import{d as q,r as B,o as n,g as $,a as e,u as r,w as a,b as y,c as d,i as k,j as c,E as f,C as v,G as N,t as x,F as R,H as S,O as u,Z as T,l as Q}from"./app-5030ba9c.js";import{b as j,C as p}from"./AppLogo-f446dfdb.js";import{Q as b,a as g}from"./QItem-07e05882.js";import{a as A,Q as D}from"./QResizeObserver-f0dde46e.js";import{Q as E}from"./QTd-4143bea9.js";import{_ as O}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-af643a16.js";import{Q as V}from"./QTable-1a499890.js";import{f as F}from"./functions-143f5d97.js";import"./position-engine-fff9eec8.js";import"./QExpansionItem-ff3665f2.js";import"./touch-5ff41afe.js";import"./format-7985d814.js";import"./use-quasar-dc29eaa5.js";import"./notify-7cd72d17.js";import"./use-fullscreen-64d58db0.js";import"./QChip-b322b801.js";import"./constants-dc375e8c.js";const P={class:"q-mb-lg q-col-gutter-lg row items-center"},U=y("h2",{class:"text-bold text-h4 q-ma-none"},"Todos os Usuários",-1),ie=q({__name:"Users",props:{users:{type:Array,required:!0},pagination:{type:Object,required:!0},active:{type:Boolean,default:()=>!0},roles:{type:Object,required:!0}},setup(l){const _=[{name:"name",field:"name",label:"Nome",align:"left",sortable:!0},{name:"role",field:t=>l.roles[t.role],label:"Tipo",align:"left"},{name:"email",field:"email",label:"Email",align:"left"},{name:"last_login_at",field:"last_login_at",format:t=>t?S(t).fromNow():"-",label:"Último login",align:"center"},{name:"created_at",field:"created_at",format:F,label:"Criado em",align:"center",sortable:!0},{name:"actions",field:t=>t,label:"Ações",align:"center"}],i=B(!1),h=t=>{const{page:s,rowsPerPage:o,sortBy:m,descending:w}=t.pagination;i.value=!0,u.reload({only:["users","pagination"],preserveState:!0,data:{page:s,rowsPerPage:o,sortBy:m,descending:w,active:l.active},onFinish:()=>i.value=!1})};return(t,s)=>(n(),$(R,null,[e(r(T),{title:"Todos os Usuários"}),e(O,null,{default:a(()=>[y("section",P,[U,t.$q.screen.gt.xs?(n(),d(C,{key:0})):k("",!0),e(j,{unelevated:"",flat:""},{default:a(()=>[e(c,{color:"secondary",outline:!l.active,disable:i.value||l.active,label:"Ativos",unelevated:"","no-caps":"",onClick:s[0]||(s[0]=()=>r(u).reload({data:{active:!0}}))},null,8,["outline","disable"]),e(c,{color:"secondary",outline:l.active,disable:i.value||!l.active,label:"Arquivados",unelevated:"","no-caps":"",onClick:s[1]||(s[1]=()=>r(u).reload({data:{active:!1}}))},null,8,["outline","disable"])]),_:1}),e(r(Q),{class:"text-reset",href:t.$route("users.create")},{default:a(()=>[e(c,{color:"primary",disable:i.value,label:"Novo",unelevated:"","no-caps":""},null,8,["disable"])]),_:1},8,["href"])]),y("section",null,[(n(),d(r(V),{flat:"",class:"full-width sticky-last-column",bordered:"",key:(+new Date).toString(36),onRequest:h,"rows-per-page-options":[5,10,25,50],loading:i.value,"binary-state-sort":"",rows:l.users,pagination:l.pagination,columns:_,"row-key":"id"},{"body-cell-actions":a(o=>[e(E,{props:o},{default:a(()=>[e(c,{icon:"more_horiz",flat:"",round:""},{default:a(()=>[e(A,null,{default:a(()=>[e(D,{dense:"",style:{"min-width":"100px"}},{default:a(()=>[e(r(Q),{class:"text-reset",href:t.$route("users.edit",{id:o.value.id})},{default:a(()=>[f((n(),d(b,{dense:"",clickable:""},{default:a(()=>[e(g,null,{default:a(()=>[v("Editar")]),_:1})]),_:1})),[[p]])]),_:2},1032,["href"]),o.value.deleted_at?f((n(),d(b,{key:0,onClick:m=>r(u).post(t.$route("users.restore",{id:o.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:""},{default:a(()=>[e(g,null,{default:a(()=>[v("Restaurar")]),_:1})]),_:2},1032,["onClick"])),[[p]]):k("",!0),e(N),f((n(),d(b,{onClick:m=>r(u).delete(t.$route("users.destroy",{id:o.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:"",class:"text-red-8"},{default:a(()=>[e(g,null,{default:a(()=>[v(x(o.value.deleted_at?"Remover permanentemente":"Remover"),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[p]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["loading","rows","pagination"]))])]),_:1})],64))}});export{ie as default};
