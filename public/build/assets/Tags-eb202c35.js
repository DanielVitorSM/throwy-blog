import{Q as V}from"./QSpace-654b85e0.js";import{d as q,r as R,T as $,_ as E,o as d,c as u,w as l,a as t,$ as N,a0 as h,b as g,t as H,e as P,Q as w,u as a,i as k,a1 as M,j as f,E as Q,a2 as A,g as F,f as _,C as x,G as O,F as Y,H as j,O as I,Z as z}from"./app-b69ccc3c.js";import{Q as S}from"./QTd-541a5cc4.js";import{Q as B,a as D}from"./QItem-91d9023b.js";import{a as X,Q as U}from"./QResizeObserver-40ffc2d6.js";import{C}from"./AppLogo-1bf7f7a9.js";import{_ as G}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-099840d7.js";import{Q as K}from"./QTable-04f69b69.js";import{u as L}from"./use-quasar-daa21963.js";import{Q as Z}from"./QForm-b03f552f.js";import{u as J}from"./use-dialog-plugin-component-4f3461ce.js";import"./position-engine-2451d219.js";import"./QExpansionItem-ca75eda7.js";import"./touch-5ff41afe.js";import"./format-702da16c.js";import"./notify-0d4c84f3.js";import"./use-fullscreen-75389d89.js";import"./QChip-f3f6b2f3.js";const W={class:"text-h6"},T=q({__name:"EditTag",props:{tagId:String},setup(r){const i=R(!1),{dialogRef:m,onDialogCancel:y,onDialogHide:p,onDialogOK:b}=J(),e=$({name:"",slug:""});E(()=>{r.tagId&&(i.value=!0,axios.get(route("tags.show",{id:r.tagId})).then(s=>{const{body:o}=s.data;e.name=o.name,e.slug=o.slug}).catch(()=>p()).finally(()=>i.value=!1))});const n=()=>{const s=r.tagId?route("tags.update",{id:r.tagId}):route("tags.store"),o=r.tagId?"put":"post";e[o](s,{onSuccess:()=>b(),headers:{"X-Reload":"1"}})},v=()=>{e.delete(route("tags.destroy",{id:r.tagId}),{onSuccess:()=>b(),headers:{"X-Reload":"1"}})};return(s,o)=>(d(),u(A,{ref_key:"dialogRef",ref:m,onHide:a(p),persistent:a(e).processing},{default:l(()=>[t(N,{style:{"max-width":"350px",width:"100%"}},{default:l(()=>[t(h,null,{default:l(()=>[g("div",W,H(r.tagId?"Editar tag":"Adicionar tag"),1)]),_:1}),t(Z,{onSubmit:o[4]||(o[4]=P(()=>n(),["prevent"]))},{default:l(()=>[t(h,{class:"q-pt-none q-gutter-md"},{default:l(()=>[t(w,{dense:"",modelValue:a(e).name,"onUpdate:modelValue":o[0]||(o[0]=c=>a(e).name=c),loading:i.value,autofocus:"",disabled:a(e).processing,label:"Nome",error:!!a(e).errors.name,outlined:"",onBlur:o[1]||(o[1]=c=>a(e).clearErrors()),"hide-bottom-space":"","error-message":a(e).errors.name},null,8,["modelValue","loading","disabled","error","error-message"]),r.tagId?(d(),u(w,{key:0,dense:"",onBlur:o[2]||(o[2]=c=>a(e).clearErrors()),modelValue:a(e).slug,"onUpdate:modelValue":o[3]||(o[3]=c=>a(e).slug=c),loading:i.value,autofocus:"",disabled:a(e).processing,label:"Slug",error:!!a(e).errors.slug,outlined:"","hide-bottom-space":"","error-message":a(e).errors.slug},null,8,["modelValue","loading","disabled","error","error-message"])):k("",!0)]),_:1})]),_:1}),t(M,null,{default:l(()=>[r.tagId?(d(),u(f,{key:0,disable:a(e).processing,color:"negative",onClick:v,flat:"",label:"Remover"},null,8,["disable"])):k("",!0),t(V),Q(t(f,{disable:a(e).processing,onClick:a(y),flat:"",label:"Cancelar"},null,8,["disable","onClick"]),[[C]]),t(f,{color:"primary",onClick:n,disable:a(e).processing||i.value,flat:"",label:"Salvar"},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide","persistent"]))}}),ee={class:"q-mb-lg q-col-gutter-lg row items-center"},ae=g("h2",{class:"text-bold text-h4 q-ma-none"},"Tags",-1),Qe=q({__name:"Tags",props:{tags:{type:Array,required:!0},pagination:{type:Object,required:!0}},setup(r){const i=R(!1),m=L(),y=[{name:"name",field:"name",label:"Nome",align:"left",sortable:!0},{name:"posts_count",field:"posts_count",label:"Posts",align:"center",sortable:!0},{name:"created_at",field:"created_at",label:"Criado em",format:n=>j(n).format("DD/MM/YYYY HH:mm:ss"),align:"center",sortable:!0},{name:"actions",field:n=>n,label:"Ações",align:"center"}],p=n=>{const{page:v,rowsPerPage:s,sortBy:o,descending:c}=n.pagination;i.value=!0,I.reload({only:["tags","pagination"],preserveState:!0,data:{page:v,rowsPerPage:s,sortBy:o,descending:c},onFinish:()=>i.value=!1})},b=()=>m.dialog({component:T}),e=n=>m.dialog({component:T,componentProps:{tagId:n}});return(n,v)=>(d(),F(Y,null,[t(a(z),{title:"Tag"}),t(G,null,{default:l(()=>[g("section",ee,[ae,a(m).screen.gt.xs?(d(),u(V,{key:0})):k("",!0),g("div",null,[t(f,{onClick:b,color:"primary",disable:i.value,label:"Novo",unelevated:"","no-caps":""},null,8,["disable"])])]),g("section",null,[(d(),u(a(K),{flat:"",class:"full-width sticky-last-column",bordered:"",key:(+new Date).toString(36),onRequest:p,"rows-per-page-options":[5,10,25,50],loading:i.value,"binary-state-sort":"",rows:r.tags,pagination:r.pagination,columns:y,"row-key":"id"},{"body-cell-published":l(s=>[t(S,{props:s},{default:l(()=>[s.value?(d(),u(_,{key:0,name:"check",size:"xs",color:"green"})):(d(),u(_,{key:1,name:"close",size:"xs",color:"red"}))]),_:2},1032,["props"])]),"body-cell-actions":l(s=>[t(S,{props:s},{default:l(()=>[t(f,{icon:"more_horiz",flat:"",round:""},{default:l(()=>[t(X,null,{default:l(()=>[t(U,{dense:"",style:{"min-width":"100px"}},{default:l(()=>[Q((d(),u(B,{onClick:()=>e(s.value.id),dense:"",clickable:""},{default:l(()=>[t(D,null,{default:l(()=>[x("Editar")]),_:1})]),_:2},1032,["onClick"])),[[C]]),t(O),Q((d(),u(B,{onClick:o=>a(I).delete(n.$route("tags.destroy",{id:s.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:"",class:"text-red-8"},{default:l(()=>[t(D,null,{default:l(()=>[x("Remover")]),_:1})]),_:2},1032,["onClick"])),[[C]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["loading","rows","pagination"]))])]),_:1})],64))}});export{Qe as default};
