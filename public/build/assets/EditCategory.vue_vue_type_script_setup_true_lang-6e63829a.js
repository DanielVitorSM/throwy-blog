import{d as Q,r as k,T as S,_ as V,o as i,c as u,w as s,a as t,$ as B,a0 as b,b as w,t as x,e as D,Q as p,u as o,i as y,a1 as h,j as g,E as R,a2 as E}from"./app-b69ccc3c.js";import{Q as N}from"./QForm-b03f552f.js";import{Q as H}from"./QSpace-654b85e0.js";import{C as $}from"./AppLogo-1bf7f7a9.js";import{u as q}from"./use-dialog-plugin-component-4f3461ce.js";const A={class:"text-h6"},F=Q({__name:"EditCategory",props:{categoryId:String},setup(r){const l=k(!1),{dialogRef:C,onDialogCancel:v,onDialogHide:c,onDialogOK:m}=q(),e=S({name:"",slug:""});V(()=>{r.categoryId&&(l.value=!0,axios.get(route("categories.show",{id:r.categoryId})).then(d=>{const{body:a}=d.data;e.name=a.name,e.slug=a.slug}).catch(()=>c()).finally(()=>l.value=!1))});const f=()=>{const d=r.categoryId?route("categories.update",{id:r.categoryId}):route("categories.store"),a=r.categoryId?"put":"post";e[a](d,{onSuccess:()=>m(),headers:{"X-Reload":"1"}})},I=()=>{e.delete(route("categories.destroy",{id:r.categoryId}),{onSuccess:()=>m(),headers:{"X-Reload":"1"}})};return(d,a)=>(i(),u(E,{ref_key:"dialogRef",ref:C,onHide:o(c),persistent:o(e).processing},{default:s(()=>[t(B,{style:{"max-width":"350px",width:"100%"}},{default:s(()=>[t(b,null,{default:s(()=>[w("div",A,x(r.categoryId?"Editar categoria":"Adicionar categoria"),1)]),_:1}),t(N,{onSubmit:a[4]||(a[4]=D(()=>f(),["prevent"]))},{default:s(()=>[t(b,{class:"q-pt-none q-gutter-md"},{default:s(()=>[t(p,{dense:"",modelValue:o(e).name,"onUpdate:modelValue":a[0]||(a[0]=n=>o(e).name=n),loading:l.value,autofocus:"",disabled:o(e).processing,label:"Nome",error:!!o(e).errors.name,outlined:"",onBlur:a[1]||(a[1]=n=>o(e).clearErrors()),"hide-bottom-space":"","error-message":o(e).errors.name},null,8,["modelValue","loading","disabled","error","error-message"]),r.categoryId?(i(),u(p,{key:0,dense:"",onBlur:a[2]||(a[2]=n=>o(e).clearErrors()),modelValue:o(e).slug,"onUpdate:modelValue":a[3]||(a[3]=n=>o(e).slug=n),loading:l.value,autofocus:"",disabled:o(e).processing,label:"Slug",error:!!o(e).errors.slug,outlined:"","hide-bottom-space":"","error-message":o(e).errors.slug},null,8,["modelValue","loading","disabled","error","error-message"])):y("",!0)]),_:1})]),_:1}),t(h,null,{default:s(()=>[r.categoryId?(i(),u(g,{key:0,disable:o(e).processing,color:"negative",onClick:I,flat:"",label:"Remover"},null,8,["disable"])):y("",!0),t(H),R(t(g,{disable:o(e).processing,onClick:o(v),flat:"",label:"Cancelar"},null,8,["disable","onClick"]),[[$]]),t(g,{color:"primary",onClick:f,disable:o(e).processing||l.value,flat:"",label:"Salvar"},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide","persistent"]))}});export{F as _};
