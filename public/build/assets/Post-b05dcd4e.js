import{m as _t,q as wt,r as X,k as b,I as na,J as dt,K as la,A as f,j as R,P as jt,L as oa,M as At,n as Et,s as Ft,N as Bt,R as ua,v as Ye,S as Pe,U as Pt,V as Nt,W as ra,X as ia,E as sa,d as da,T as ca,o as le,g as Me,a as O,u as _,w as K,b as j,t as ie,e as kt,Q as gt,i as fe,c as ot,C as yt,f as Fe,h as va,Y as fa,F as ma,Z as ha,O as ga,l as ya}from"./app-b69ccc3c.js";import{a as ba}from"./QResizeObserver-40ffc2d6.js";import{u as Ma}from"./use-cache-e4206936.js";import{p as H}from"./format-702da16c.js";import{T as Da,_ as _a}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-099840d7.js";import{Q as wa}from"./QSpace-654b85e0.js";import{Q as qt}from"./QImg-489218c9.js";import{Q as xa}from"./QForm-b03f552f.js";import{u as pa}from"./use-quasar-daa21963.js";import{Q as ka}from"./use-fullscreen-75389d89.js";import{_ as ut,Q as qa}from"./ExpansionCard.vue_vue_type_script_setup_true_lang-936af171.js";import{_ as Sa}from"./Cropper.vue_vue_type_script_setup_true_lang-4182a477.js";import{f as rt}from"./functions-1e89eafd.js";import{_ as St}from"./EditCategory.vue_vue_type_script_setup_true_lang-6e63829a.js";import"./position-engine-2451d219.js";import"./QItem-91d9023b.js";import"./AppLogo-1bf7f7a9.js";import"./QExpansionItem-ca75eda7.js";import"./touch-5ff41afe.js";import"./notify-0d4c84f3.js";import"./use-ratio-73183db8.js";import"./QChip-f3f6b2f3.js";import"./QTooltip-901db448.js";import"./index.esm-bundler-d1d05260.js";import"./use-dialog-plugin-component-4f3461ce.js";function Ke(e,o=new WeakMap){if(Object(e)!==e)return e;if(o.has(e))return o.get(e);const c=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const i=e.valueOf();if(Object(i)!==i){const l=new e.constructor(i);return o.set(e,l),l}}return o.set(e,c),e instanceof Set?e.forEach(i=>{c.add(Ke(i,o))}):e instanceof Map&&e.forEach((i,l)=>{c.set(l,Ke(i,o))}),Object.assign(c,...Object.keys(e).map(i=>({[i]:Ke(e[i],o)})))}const Ct=_t({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:o,emit:c}){const{proxy:i}=wt(),{$q:l}=i,s=X(null),x=X(""),d=X("");let D=!1;const A=b(()=>na({initialValue:x.value,validate:e.validate,set:g,cancel:S,updatePosition:Q},"value",()=>d.value,r=>{d.value=r}));function g(){e.validate(d.value)!==!1&&(B()===!0&&(c("save",d.value,x.value),c("update:modelValue",d.value)),z())}function S(){B()===!0&&c("cancel",d.value,x.value),z()}function Q(){dt(()=>{s.value.updatePosition()})}function B(){return la(d.value,x.value)===!1}function z(){D=!0,s.value.hide()}function W(){D=!1,x.value=Ke(e.modelValue),d.value=Ke(e.modelValue),c("beforeShow")}function $(){c("show")}function me(){D===!1&&B()===!0&&(e.autoSave===!0&&e.validate(d.value)===!0?(c("save",d.value,x.value),c("update:modelValue",d.value)):c("cancel",d.value,x.value)),c("beforeHide")}function oe(){c("hide")}function k(){const r=o.default!==void 0?[].concat(o.default(A.value)):[];return e.title&&r.unshift(f("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&r.push(f("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[f(R,{flat:!0,color:e.color,label:e.labelCancel||l.lang.label.cancel,onClick:S}),f(R,{flat:!0,color:e.color,label:e.labelSet||l.lang.label.set,onClick:g})])),r}return Object.assign(i,{set:g,cancel:S,show(r){s.value!==null&&s.value.show(r)},hide(r){s.value!==null&&s.value.hide(r)},updatePosition:Q}),()=>{if(e.disable!==!0)return f(ba,{ref:s,class:"q-popup-edit",cover:e.cover,onBeforeShow:W,onShow:$,onBeforeHide:me,onHide:oe,onEscapeKey:S},k)}}}),_e=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ca(e,o,c){return Object.prototype.toString.call(e)==="[object Date]"&&(c=e.getDate(),o=e.getMonth()+1,e=e.getFullYear()),Oa(xt(e,o,c))}function Yt(e,o,c){return zt(Ha(e,o,c))}function Ya(e){return Va(e)===0}function st(e,o){return o<=6?31:o<=11||Ya(e)?30:29}function Va(e){const o=_e.length;let c=_e[0],i,l,s,x,d;if(e<c||e>=_e[o-1])throw new Error("Invalid Jalaali year "+e);for(d=1;d<o&&(i=_e[d],l=i-c,!(e<i));d+=1)c=i;return x=e-c,l-x<6&&(x=x-l+F(l+4,33)*33),s=ae(ae(x+1,33)-1,4),s===-1&&(s=4),s}function Qt(e,o){const c=_e.length,i=e+621;let l=-14,s=_e[0],x,d,D,A,g;if(e<s||e>=_e[c-1])throw new Error("Invalid Jalaali year "+e);for(g=1;g<c&&(x=_e[g],d=x-s,!(e<x));g+=1)l=l+F(d,33)*8+F(ae(d,33),4),s=x;A=e-s,l=l+F(A,33)*8+F(ae(A,33)+3,4),ae(d,33)===4&&d-A===4&&(l+=1);const S=F(i,4)-F((F(i,100)+1)*3,4)-150,Q=20+l-S;return o||(d-A<6&&(A=A-d+F(d+4,33)*33),D=ae(ae(A+1,33)-1,4),D===-1&&(D=4)),{leap:D,gy:i,march:Q}}function Ha(e,o,c){const i=Qt(e,!0);return xt(i.gy,3,i.march)+(o-1)*31-F(o,7)*(o-7)+c-1}function Oa(e){const o=zt(e).gy;let c=o-621,i,l,s;const x=Qt(c,!1),d=xt(o,3,x.march);if(s=e-d,s>=0){if(s<=185)return l=1+F(s,31),i=ae(s,31)+1,{jy:c,jm:l,jd:i};s-=186}else c-=1,s+=179,x.leap===1&&(s+=1);return l=7+F(s,30),i=ae(s,30)+1,{jy:c,jm:l,jd:i}}function xt(e,o,c){let i=F((e+F(o-8,6)+100100)*1461,4)+F(153*ae(o+9,12)+2,5)+c-34840408;return i=i-F(F(e+100100+F(o-8,6),100)*3,4)+752,i}function zt(e){let o=4*e+139361631;o=o+F(F(4*e+183187720,146097)*3,4)*4-3908;const c=F(ae(o,1461),4)*5+308,i=F(ae(c,153),5)+1,l=ae(F(c,153),12)+1;return{gy:F(o,1461)-100100+F(8-l,6),gm:l,gd:i}}function F(e,o){return~~(e/o)}function ae(e,o){return e-~~(e/o)*o}const Ia=["gregorian","persian"],Ut={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ia.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Zt=["update:modelValue"];function ge(e){return e.year+"/"+H(e.month)+"/"+H(e.day)}function Lt(e,o){const c=b(()=>e.disable!==!0&&e.readonly!==!0),i=b(()=>c.value===!0?0:-1),l=b(()=>{const d=[];return e.color!==void 0&&d.push(`bg-${e.color}`),e.textColor!==void 0&&d.push(`text-${e.textColor}`),d.join(" ")});function s(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function x(d){const D=new Date,A=d===!0?null:0;if(e.calendar==="persian"){const g=Ca(D);return{year:g.jy,month:g.jm,day:g.jd}}return{year:D.getFullYear(),month:D.getMonth()+1,day:D.getDate(),hour:A,minute:A,second:A,millisecond:A}}return{editable:c,tabindex:i,headerClass:l,getLocale:s,getCurrentDate:x}}const Rt=864e5,Ta=36e5,Dt=6e4,Kt="YYYY-MM-DDTHH:mm:ss.SSSZ",$a=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,ja=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,bt={};function Aa(e,o){const c="("+o.days.join("|")+")",i=e+c;if(bt[i]!==void 0)return bt[i];const l="("+o.daysShort.join("|")+")",s="("+o.months.join("|")+")",x="("+o.monthsShort.join("|")+")",d={};let D=0;const A=e.replace(ja,S=>{switch(D++,S){case"YY":return d.YY=D,"(-?\\d{1,2})";case"YYYY":return d.YYYY=D,"(-?\\d{1,4})";case"M":return d.M=D,"(\\d{1,2})";case"MM":return d.M=D,"(\\d{2})";case"MMM":return d.MMM=D,x;case"MMMM":return d.MMMM=D,s;case"D":return d.D=D,"(\\d{1,2})";case"Do":return d.D=D++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return d.D=D,"(\\d{2})";case"H":return d.H=D,"(\\d{1,2})";case"HH":return d.H=D,"(\\d{2})";case"h":return d.h=D,"(\\d{1,2})";case"hh":return d.h=D,"(\\d{2})";case"m":return d.m=D,"(\\d{1,2})";case"mm":return d.m=D,"(\\d{2})";case"s":return d.s=D,"(\\d{1,2})";case"ss":return d.s=D,"(\\d{2})";case"S":return d.S=D,"(\\d{1})";case"SS":return d.S=D,"(\\d{2})";case"SSS":return d.S=D,"(\\d{3})";case"A":return d.A=D,"(AM|PM)";case"a":return d.a=D,"(am|pm)";case"aa":return d.aa=D,"(a\\.m\\.|p\\.m\\.)";case"ddd":return l;case"dddd":return c;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return d.Z=D,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return d.ZZ=D,"(Z|[+-]\\d{2}\\d{2})";case"X":return d.X=D,"(-?\\d+)";case"x":return d.x=D,"(-?\\d{4,})";default:return D--,S[0]==="["&&(S=S.substring(1,S.length-1)),S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),g={map:d,regex:new RegExp("^"+A)};return bt[i]=g,g}function Xt(e,o){return e!==void 0?e:o!==void 0?o.date:oa.date}function Vt(e,o=""){const c=e>0?"-":"+",i=Math.abs(e),l=Math.floor(i/60),s=i%60;return c+H(l)+o+H(s)}function Re(e,o,c,i,l){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(l!==void 0&&Object.assign(s,l),e==null||e===""||typeof e!="string")return s;o===void 0&&(o=Kt);const x=Xt(c,jt.props),d=x.months,D=x.monthsShort,{regex:A,map:g}=Aa(o,x),S=e.match(A);if(S===null)return s;let Q="";if(g.X!==void 0||g.x!==void 0){const B=parseInt(S[g.X!==void 0?g.X:g.x],10);if(isNaN(B)===!0||B<0)return s;const z=new Date(B*(g.X!==void 0?1e3:1));s.year=z.getFullYear(),s.month=z.getMonth()+1,s.day=z.getDate(),s.hour=z.getHours(),s.minute=z.getMinutes(),s.second=z.getSeconds(),s.millisecond=z.getMilliseconds()}else{if(g.YYYY!==void 0)s.year=parseInt(S[g.YYYY],10);else if(g.YY!==void 0){const B=parseInt(S[g.YY],10);s.year=B<0?B:2e3+B}if(g.M!==void 0){if(s.month=parseInt(S[g.M],10),s.month<1||s.month>12)return s}else g.MMM!==void 0?s.month=D.indexOf(S[g.MMM])+1:g.MMMM!==void 0&&(s.month=d.indexOf(S[g.MMMM])+1);if(g.D!==void 0){if(s.day=parseInt(S[g.D],10),s.year===null||s.month===null||s.day<1)return s;const B=i!=="persian"?new Date(s.year,s.month,0).getDate():st(s.year,s.month);if(s.day>B)return s}g.H!==void 0?s.hour=parseInt(S[g.H],10)%24:g.h!==void 0&&(s.hour=parseInt(S[g.h],10)%12,(g.A&&S[g.A]==="PM"||g.a&&S[g.a]==="pm"||g.aa&&S[g.aa]==="p.m.")&&(s.hour+=12),s.hour=s.hour%24),g.m!==void 0&&(s.minute=parseInt(S[g.m],10)%60),g.s!==void 0&&(s.second=parseInt(S[g.s],10)%60),g.S!==void 0&&(s.millisecond=parseInt(S[g.S],10)*10**(3-S[g.S].length)),(g.Z!==void 0||g.ZZ!==void 0)&&(Q=g.Z!==void 0?S[g.Z].replace(":",""):S[g.ZZ],s.timezoneOffset=(Q[0]==="+"?-1:1)*(60*Q.slice(1,3)+1*Q.slice(3,5)))}return s.dateHash=H(s.year,6)+"/"+H(s.month)+"/"+H(s.day),s.timeHash=H(s.hour)+":"+H(s.minute)+":"+H(s.second)+Q,s}function Ht(e){const o=new Date(e.getFullYear(),e.getMonth(),e.getDate());o.setDate(o.getDate()-(o.getDay()+6)%7+3);const c=new Date(o.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);const i=o.getTimezoneOffset()-c.getTimezoneOffset();o.setHours(o.getHours()-i);const l=(o-c)/(Rt*7);return 1+Math.floor(l)}function ye(e,o,c){const i=new Date(e),l=`set${c===!0?"UTC":""}`;switch(o){case"year":case"years":i[`${l}Month`](0);case"month":case"months":i[`${l}Date`](1);case"day":case"days":case"date":i[`${l}Hours`](0);case"hour":case"hours":i[`${l}Minutes`](0);case"minute":case"minutes":i[`${l}Seconds`](0);case"second":case"seconds":i[`${l}Milliseconds`](0)}return i}function it(e,o,c){return(e.getTime()-e.getTimezoneOffset()*Dt-(o.getTime()-o.getTimezoneOffset()*Dt))/c}function Wt(e,o,c="days"){const i=new Date(e),l=new Date(o);switch(c){case"years":case"year":return i.getFullYear()-l.getFullYear();case"months":case"month":return(i.getFullYear()-l.getFullYear())*12+i.getMonth()-l.getMonth();case"days":case"day":case"date":return it(ye(i,"day"),ye(l,"day"),Rt);case"hours":case"hour":return it(ye(i,"hour"),ye(l,"hour"),Ta);case"minutes":case"minute":return it(ye(i,"minute"),ye(l,"minute"),Dt);case"seconds":case"second":return it(ye(i,"second"),ye(l,"second"),1e3)}}function Ot(e){return Wt(e,ye(e,"year"),"days")+1}function It(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Tt={YY(e,o,c){const i=this.YYYY(e,o,c)%100;return i>=0?H(i):"-"+H(Math.abs(i))},YYYY(e,o,c){return c??e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return H(e.getMonth()+1)},MMM(e,o){return o.monthsShort[e.getMonth()]},MMMM(e,o){return o.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return It(this.Q(e))},D(e){return e.getDate()},Do(e){return It(e.getDate())},DD(e){return H(e.getDate())},DDD(e){return Ot(e)},DDDD(e){return H(Ot(e),3)},d(e){return e.getDay()},dd(e,o){return this.dddd(e,o).slice(0,2)},ddd(e,o){return o.daysShort[e.getDay()]},dddd(e,o){return o.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Ht(e)},ww(e){return H(Ht(e))},H(e){return e.getHours()},HH(e){return H(e.getHours())},h(e){const o=e.getHours();return o===0?12:o>12?o%12:o},hh(e){return H(this.h(e))},m(e){return e.getMinutes()},mm(e){return H(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return H(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return H(Math.floor(e.getMilliseconds()/10))},SSS(e){return H(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,o,c,i){const l=i??e.getTimezoneOffset();return Vt(l,":")},ZZ(e,o,c,i){const l=i??e.getTimezoneOffset();return Vt(l)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Jt(e,o,c,i,l){if(e!==0&&!e||e===1/0||e===-1/0)return;const s=new Date(e);if(isNaN(s))return;o===void 0&&(o=Kt);const x=Xt(c,jt.props);return o.replace($a,(d,D)=>d in Tt?Tt[d](s,x,i,l):D===void 0?d:D.split("\\]").join("]"))}const Ce=20,Ea=["Calendar","Years","Months"],$t=e=>Ea.includes(e),Mt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Be=" — ";function De(e){return e.year+"/"+H(e.month)}const Fa=_t({name:"QDate",props:{...Ut,...At,...Et,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Mt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Mt},navigationMaxYearMonth:{type:String,validator:Mt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:$t}},emits:[...Zt,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:c}){const{proxy:i}=wt(),{$q:l}=i,s=Ft(e,l),{getCache:x}=Ma(),{tabindex:d,headerClass:D,getLocale:A,getCurrentDate:g}=Lt(e,l);let S;const Q=Bt(e),B=Nt(Q),z=X(null),W=X(je()),$=X(A()),me=b(()=>je()),oe=b(()=>A()),k=b(()=>g()),r=X(nt(W.value,$.value)),w=X(e.defaultView),q=l.lang.rtl===!0?"right":"left",M=X(q.value),I=X(q.value),se=r.value.year,de=X(se-se%Ce-(se<0?Ce:0)),Z=X(null),we=b(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(s.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ne=b(()=>e.color||"primary"),ue=b(()=>e.textColor||"white"),G=b(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),he=b(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),J=b(()=>he.value.filter(t=>typeof t=="string").map(t=>Ze(t,W.value,$.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),re=b(()=>{const t=a=>Ze(a,W.value,$.value);return he.value.filter(a=>ua(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),Ve=b(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Yt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Ne=b(()=>e.calendar==="persian"?ge:(t,a,n)=>Jt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?W.value:a,n===void 0?$.value:n,t.year,t.timezoneOffset)),be=b(()=>J.value.length+re.value.reduce((t,a)=>t+1+Wt(Ve.value(a.to),Ve.value(a.from)),0)),xe=b(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(Z.value!==null){const n=Z.value.init,h=Ve.value(n);return $.value.daysShort[h.getDay()]+", "+$.value.monthsShort[n.month-1]+" "+n.day+Be+"?"}if(be.value===0)return Be;if(be.value>1)return`${be.value} ${$.value.pluralDay}`;const t=J.value[0],a=Ve.value(t);return isNaN(a.valueOf())===!0?Be:$.value.headerTitle!==void 0?$.value.headerTitle(a,t):$.value.daysShort[a.getDay()]+", "+$.value.monthsShort[t.month-1]+" "+t.day}),Xe=b(()=>J.value.concat(re.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),Qe=b(()=>J.value.concat(re.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),We=b(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(be.value===0)return Be;if(be.value>1){const t=Xe.value,a=Qe.value,n=$.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+Be+n[a.month-1]+" ":t.month!==a.month?Be+n[a.month-1]:"")+" "+a.year}return J.value[0].year}),He=b(()=>{const t=[l.iconSet.datetime.arrowLeft,l.iconSet.datetime.arrowRight];return l.lang.rtl===!0?t.reverse():t}),Oe=b(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):$.value.firstDayOfWeek),ze=b(()=>{const t=$.value.daysShort,a=Oe.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ce=b(()=>{const t=r.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():st(t.year,t.month)}),Je=b(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),U=b(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),L=b(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ue=b(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return U.value!==null&&U.value.year>=r.value.year&&(t.year.prev=!1,U.value.year===r.value.year&&U.value.month>=r.value.month&&(t.month.prev=!1)),L.value!==null&&L.value.year<=r.value.year&&(t.year.next=!1,L.value.year===r.value.year&&L.value.month<=r.value.month&&(t.month.next=!1)),t}),Ie=b(()=>{const t={};return J.value.forEach(a=>{const n=De(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),Ge=b(()=>{const t={};return re.value.forEach(a=>{const n=De(a.from),h=De(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===h?a.to.day:void 0,range:a}),n<h){let m;const{year:T,month:y}=a.from,Y=y<12?{year:T,month:y+1}:{year:T+1,month:1};for(;(m=De(Y))<=h;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===h?a.to.day:void 0,range:a}),Y.month++,Y.month>12&&(Y.year++,Y.month=1)}}),t}),pe=b(()=>{if(Z.value===null)return;const{init:t,initHash:a,final:n,finalHash:h}=Z.value,[m,T]=a<=h?[t,n]:[n,t],y=De(m),Y=De(T);if(y!==ee.value&&Y!==ee.value)return;const E={};return y===ee.value?(E.from=m.day,E.includeFrom=!0):E.from=1,Y===ee.value?(E.to=T.day,E.includeTo=!0):E.to=ce.value,E}),ee=b(()=>De(r.value)),ct=b(()=>{const t={};if(e.options===void 0){for(let n=1;n<=ce.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=ce.value;n++){const h=ee.value+"/"+H(n);t[n]=a(h)}return t}),vt=b(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ce.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=ce.value;n++){const h=ee.value+"/"+H(n);t[n]=a(h)===!0&&Je.value(h)}}return t}),Te=b(()=>{let t,a;const{year:n,month:h}=r.value;if(e.calendar!=="persian")t=new Date(n,h-1,1),a=new Date(n,h-1,0).getDate();else{const m=Yt(n,h,1);t=new Date(m.gy,m.gm-1,m.gd);let T=h-1,y=n;T===0&&(T=12,y--),a=st(y,T)}return{days:t.getDay()-Oe.value-1,endDay:a}}),ke=b(()=>{const t=[],{days:a,endDay:n}=Te.value,h=a<0?a+7:a;if(h<6)for(let y=n-h;y<=n;y++)t.push({i:y,fill:!0});const m=t.length;for(let y=1;y<=ce.value;y++){const Y={i:y,event:vt.value[y],classes:[]};ct.value[y]===!0&&(Y.in=!0,Y.flat=!0),t.push(Y)}if(Ie.value[ee.value]!==void 0&&Ie.value[ee.value].forEach(y=>{const Y=m+y-1;Object.assign(t[Y],{selected:!0,unelevated:!0,flat:!1,color:ne.value,textColor:ue.value})}),Ge.value[ee.value]!==void 0&&Ge.value[ee.value].forEach(y=>{if(y.from!==void 0){const Y=m+y.from-1,E=m+(y.to||ce.value)-1;for(let Le=Y;Le<=E;Le++)Object.assign(t[Le],{range:y.range,unelevated:!0,color:ne.value,textColor:ue.value});Object.assign(t[Y],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[E],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const Y=m+y.to-1;for(let E=m;E<=Y;E++)Object.assign(t[E],{range:y.range,unelevated:!0,color:ne.value,textColor:ue.value});Object.assign(t[Y],{flat:!1,rangeTo:!0})}else{const Y=m+ce.value-1;for(let E=m;E<=Y;E++)Object.assign(t[E],{range:y.range,unelevated:!0,color:ne.value,textColor:ue.value})}}),pe.value!==void 0){const y=m+pe.value.from-1,Y=m+pe.value.to-1;for(let E=y;E<=Y;E++)t[E].color=ne.value,t[E].editRange=!0;pe.value.includeFrom===!0&&(t[y].editRangeFrom=!0),pe.value.includeTo===!0&&(t[Y].editRangeTo=!0)}r.value.year===k.value.year&&r.value.month===k.value.month&&(t[m+k.value.day-1].today=!0);const T=t.length%7;if(T>0){const y=7-T;for(let Y=1;Y<=y;Y++)t.push({i:Y,fill:!0})}return t.forEach(y=>{let Y="q-date__calendar-item ";y.fill===!0?Y+="q-date__calendar-item--fill":(Y+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(Y+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(Y+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(Y+=` text-${y.color}`)),y.classes=Y}),t}),$e=b(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});Ye(()=>e.modelValue,t=>{if(S===t)S=0;else{const a=nt(W.value,$.value);N(a.year,a.month,a)}}),Ye(w,()=>{z.value!==null&&i.$el.contains(document.activeElement)===!0&&z.value.focus()}),Ye(()=>r.value.year+"|"+r.value.month,()=>{c("navigation",{year:r.value.year,month:r.value.month})}),Ye(me,t=>{pt(t,$.value,"mask"),W.value=t}),Ye(oe,t=>{pt(W.value,t,"locale"),$.value=t});function et(){const t=k.value,a=Ie.value[De(t)];(a===void 0||a.includes(t.day)===!1)&&ft(t),qe(t.year,t.month)}function tt(t){$t(t)===!0&&(w.value=t)}function at(t,a){["month","year"].includes(t)&&(t==="month"?v:p)(a===!0?-1:1)}function qe(t,a){w.value="Calendar",N(t,a)}function Se(t,a){if(e.range===!1||!t){Z.value=null;return}const n=Object.assign({...r.value},t),h=a!==void 0?Object.assign({...r.value},a):n;Z.value={init:n,initHash:ge(n),final:h,finalHash:ge(h)},qe(n.year,n.month)}function je(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ze(t,a,n){return Re(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function nt(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return u();const h=n[n.length-1],m=Ze(h.from!==void 0?h.from:h,t,a);return m.dateHash===null?u():m}function u(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=k.value!==void 0?k.value:g();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+H(a)+"/01"}}function v(t){let a=r.value.year,n=Number(r.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),N(a,n),G.value===!0&&Ae("month")}function p(t){const a=Number(r.value.year)+t;N(a,r.value.month),G.value===!0&&Ae("year")}function V(t){N(t,r.value.month),w.value=e.defaultView==="Years"?"Months":"Calendar",G.value===!0&&Ae("year")}function P(t){N(r.value.year,t),w.value="Calendar",G.value===!0&&Ae("month")}function te(t,a){const n=Ie.value[a];(n!==void 0&&n.includes(t.day)===!0?mt:ft)(t)}function C(t){return{year:t.year,month:t.month,day:t.day}}function N(t,a,n){if(U.value!==null&&t<=U.value.year&&((a<U.value.month||t<U.value.year)&&(a=U.value.month),t=U.value.year),L.value!==null&&t>=L.value.year&&((a>L.value.month||t>L.value.year)&&(a=L.value.month),t=L.value.year),n!==void 0){const{hour:m,minute:T,second:y,millisecond:Y,timezoneOffset:E,timeHash:Le}=n;Object.assign(r.value,{hour:m,minute:T,second:y,millisecond:Y,timezoneOffset:E,timeHash:Le})}const h=t+"/"+H(a)+"/01";h!==r.value.dateHash&&(M.value=r.value.dateHash<h==(l.lang.rtl!==!0)?"left":"right",t!==r.value.year&&(I.value=M.value),dt(()=>{de.value=t-t%Ce-(t<0?Ce:0),Object.assign(r.value,{year:t,month:a,day:1,dateHash:h})}))}function ve(t,a,n){const h=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;S=h;const{reason:m,details:T}=lt(a,n);c("update:modelValue",h,m,T)}function Ae(t){const a=J.value[0]!==void 0&&J.value[0].dateHash!==null?{...J.value[0]}:{...r.value};dt(()=>{a.year=r.value.year,a.month=r.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():st(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const h=Ee(a);S=h;const{details:m}=lt("",a);c("update:modelValue",h,t,m)})}function lt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...C(a.target),from:C(a.from),to:C(a.to)}}:{reason:`${t}-day`,details:C(a)}}function Ee(t,a,n){return t.from!==void 0?{from:Ne.value(t.from,a,n),to:Ne.value(t.to,a,n)}:Ne.value(t,a,n)}function ft(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=ge(t.from),h=ge(t.to),m=J.value.filter(y=>y.dateHash<n||y.dateHash>h),T=re.value.filter(({from:y,to:Y})=>Y.dateHash<n||y.dateHash>h);a=m.concat(T).concat(t).map(y=>Ee(y))}else{const n=he.value.slice();n.push(Ee(t)),a=n}else a=Ee(t);ve(a,"add",t)}function mt(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=Ee(t);t.from!==void 0?a=e.modelValue.filter(h=>h.from!==void 0?h.from!==n.from&&h.to!==n.to:!0):a=e.modelValue.filter(h=>h!==n),a.length===0&&(a=null)}ve(a,"remove",t)}function pt(t,a,n){const h=J.value.concat(re.value).map(m=>Ee(m,t,a)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);c("update:modelValue",(e.multiple===!0?h:h[0])||null,n)}function Gt(){if(e.minimal!==!0)return f("div",{class:"q-date__header "+D.value},[f("div",{class:"relative-position"},[f(Pe,{name:"q-transition--fade"},()=>f("div",{key:"h-yr-"+We.value,class:"q-date__header-subtitle q-date__header-link "+(w.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...x("vY",{onClick(){w.value="Years"},onKeyup(t){t.keyCode===13&&(w.value="Years")}})},[We.value]))]),f("div",{class:"q-date__header-title relative-position flex no-wrap"},[f("div",{class:"relative-position col"},[f(Pe,{name:"q-transition--fade"},()=>f("div",{key:"h-sub"+xe.value,class:"q-date__header-title-label q-date__header-link "+(w.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...x("vC",{onClick(){w.value="Calendar"},onKeyup(t){t.keyCode===13&&(w.value="Calendar")}})},[xe.value]))]),e.todayBtn===!0?f(R,{class:"q-date__header-today self-start",icon:l.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:d.value,onClick:et}):null])])}function ht({label:t,type:a,key:n,dir:h,goTo:m,boundaries:T,cls:y}){return[f("div",{class:"row items-center q-date__arrow"},[f(R,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[0],tabindex:d.value,disable:T.prev===!1,...x("go-#"+a,{onClick(){m(-1)}})})]),f("div",{class:"relative-position overflow-hidden flex flex-center"+y},[f(Pe,{name:"q-transition--jump-"+h},()=>f("div",{key:n},[f(R,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:d.value,...x("view#"+a,{onClick:()=>{w.value=a}})})]))]),f("div",{class:"row items-center q-date__arrow"},[f(R,{round:!0,dense:!0,size:"sm",flat:!0,icon:He.value[1],tabindex:d.value,disable:T.next===!1,...x("go+#"+a,{onClick(){m(1)}})})])]}const ea={Calendar:()=>[f("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[f("div",{class:"q-date__navigation row items-center no-wrap"},ht({label:$.value.months[r.value.month-1],type:"Months",key:r.value.month,dir:M.value,goTo:v,boundaries:Ue.value.month,cls:" col"}).concat(ht({label:r.value.year,type:"Years",key:r.value.year,dir:I.value,goTo:p,boundaries:Ue.value.year,cls:""}))),f("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},ze.value.map(t=>f("div",{class:"q-date__calendar-item"},[f("div",t)]))),f("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[f(Pe,{name:"q-transition--slide-"+M.value},()=>f("div",{key:ee.value,class:"q-date__calendar-days fit"},ke.value.map(t=>f("div",{class:t.classes},[t.in===!0?f(R,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:d.value,...x("day#"+t.i,{onClick:()=>{ta(t.i)},onMouseover:()=>{aa(t.i)}})},t.event!==!1?()=>f("div",{class:"q-date__event bg-"+t.event}):null):f("div",""+t.i)]))))])])],Months(){const t=r.value.year===k.value.year,a=h=>U.value!==null&&r.value.year===U.value.year&&U.value.month>h||L.value!==null&&r.value.year===L.value.year&&L.value.month<h,n=$.value.monthsShort.map((h,m)=>{const T=r.value.month===m+1;return f("div",{class:"q-date__months-item flex flex-center"},[f(R,{class:t===!0&&k.value.month===m+1?"q-date__today":null,flat:T!==!0,label:h,unelevated:T,color:T===!0?ne.value:null,textColor:T===!0?ue.value:null,tabindex:d.value,disable:a(m+1),...x("month#"+m,{onClick:()=>{P(m+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(f("div",{class:"row no-wrap full-width"},[ht({label:r.value.year,type:"Years",key:r.value.year,dir:I.value,goTo:p,boundaries:Ue.value.year,cls:" col"})])),f("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=de.value,a=t+Ce,n=[],h=m=>U.value!==null&&U.value.year>m||L.value!==null&&L.value.year<m;for(let m=t;m<=a;m++){const T=r.value.year===m;n.push(f("div",{class:"q-date__years-item flex flex-center"},[f(R,{key:"yr"+m,class:k.value.year===m?"q-date__today":null,flat:!T,label:m,dense:!0,unelevated:T,color:T===!0?ne.value:null,textColor:T===!0?ue.value:null,tabindex:d.value,disable:h(m),...x("yr#"+m,{onClick:()=>{V(m)}})})]))}return f("div",{class:"q-date__view q-date__years flex flex-center"},[f("div",{class:"col-auto"},[f(R,{round:!0,dense:!0,flat:!0,icon:He.value[0],tabindex:d.value,disable:h(t),...x("y-",{onClick:()=>{de.value-=Ce}})})]),f("div",{class:"q-date__years-content col self-stretch row items-center"},n),f("div",{class:"col-auto"},[f(R,{round:!0,dense:!0,flat:!0,icon:He.value[1],tabindex:d.value,disable:h(a),...x("y+",{onClick:()=>{de.value+=Ce}})})])])}};function ta(t){const a={...r.value,day:t};if(e.range===!1){te(a,ee.value);return}if(Z.value===null){const n=ke.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&n.range!==void 0){mt({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){mt(a);return}const h=ge(a);Z.value={init:a,initHash:h,final:a,finalHash:h},c("rangeStart",C(a))}else{const n=Z.value.initHash,h=ge(a),m=n<=h?{from:Z.value.init,to:a}:{from:a,to:Z.value.init};Z.value=null,ft(n===h?a:{target:a,...m}),c("rangeEnd",{from:C(m.from),to:C(m.to)})}}function aa(t){if(Z.value!==null){const a={...r.value,day:t};Object.assign(Z.value,{final:a,finalHash:ge(a)})}}return Object.assign(i,{setToday:et,setView:tt,offsetCalendar:at,setCalendarTo:qe,setEditingRange:Se}),()=>{const t=[f("div",{class:"q-date__content col relative-position"},[f(Pe,{name:"q-transition--fade"},ea[w.value])])],a=Pt(o.default);return a!==void 0&&t.push(f("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&B(t,"push"),f("div",{class:we.value,...$e.value},[Gt(),f("div",{ref:z,class:"q-date__main col column",tabindex:-1},t)])}}});function Ba(e,o){if(e.hour!==null){if(e.minute===null)return"minute";if(o===!0&&e.second===null)return"second"}return"hour"}function Pa(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}const Na=_t({name:"QTime",props:{...Et,...At,...Ut,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Zt,setup(e,{slots:o,emit:c}){const i=wt(),{$q:l}=i.proxy,s=Ft(e,l),{tabindex:x,headerClass:d,getLocale:D,getCurrentDate:A}=Lt(e,l),g=Bt(e),S=Nt(g);let Q,B;const z=X(null),W=b(()=>We()),$=b(()=>D()),me=b(()=>He()),oe=Re(e.modelValue,W.value,$.value,e.calendar,me.value),k=X(Ba(oe)),r=X(oe),w=X(oe.hour===null||oe.hour<12),q=b(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(s.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),M=b(()=>{const u=r.value;return{hour:u.hour===null?"--":I.value===!0?H(u.hour):String(w.value===!0?u.hour===0?12:u.hour:u.hour>12?u.hour-12:u.hour),minute:u.minute===null?"--":H(u.minute),second:u.second===null?"--":H(u.second)}}),I=b(()=>e.format24h!==null?e.format24h:l.lang.date.format24h),se=b(()=>{const u=k.value==="hour",v=u===!0?12:60,p=r.value[k.value];let P=`rotate(${Math.round(p*(360/v))-180}deg) translateX(-50%)`;return u===!0&&I.value===!0&&r.value.hour>=12&&(P+=" scale(.7)"),{transform:P}}),de=b(()=>r.value.hour!==null),Z=b(()=>de.value===!0&&r.value.minute!==null),we=b(()=>e.hourOptions!==void 0?u=>e.hourOptions.includes(u):e.options!==void 0?u=>e.options(u,null,null):null),ne=b(()=>e.minuteOptions!==void 0?u=>e.minuteOptions.includes(u):e.options!==void 0?u=>e.options(r.value.hour,u,null):null),ue=b(()=>e.secondOptions!==void 0?u=>e.secondOptions.includes(u):e.options!==void 0?u=>e.options(r.value.hour,r.value.minute,u):null),G=b(()=>{if(we.value===null)return null;const u=xe(0,11,we.value),v=xe(12,11,we.value);return{am:u,pm:v,values:u.values.concat(v.values)}}),he=b(()=>ne.value!==null?xe(0,59,ne.value):null),J=b(()=>ue.value!==null?xe(0,59,ue.value):null),re=b(()=>{switch(k.value){case"hour":return G.value;case"minute":return he.value;case"second":return J.value}}),Ve=b(()=>{let u,v,p=0,V=1;const P=re.value!==null?re.value.values:void 0;k.value==="hour"?I.value===!0?(u=0,v=23):(u=0,v=11,w.value===!1&&(p=12)):(u=0,v=55,V=5);const te=[];for(let C=u,N=u;C<=v;C+=V,N++){const ve=C+p,Ae=P!==void 0&&P.includes(ve)===!1,lt=k.value==="hour"&&C===0?I.value===!0?"00":"12":C;te.push({val:ve,index:N,disable:Ae,label:lt})}return te}),Ne=b(()=>[[Da,ce,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Ye(()=>e.modelValue,u=>{const v=Re(u,W.value,$.value,e.calendar,me.value);(v.dateHash!==r.value.dateHash||v.timeHash!==r.value.timeHash)&&(r.value=v,v.hour===null?k.value="hour":w.value=v.hour<12)}),Ye([W,$],()=>{dt(()=>{je()})});function be(){const u={...A(),...Pa()};je(u),Object.assign(r.value,u),k.value="hour"}function xe(u,v,p){const V=Array.apply(null,{length:v+1}).map((P,te)=>{const C=te+u;return{index:C,val:p(C)===!0}}).filter(P=>P.val===!0).map(P=>P.index);return{min:V[0],max:V[V.length-1],values:V,threshold:v+1}}function Xe(u,v,p){const V=Math.abs(u-v);return Math.min(V,p-V)}function Qe(u,{min:v,max:p,values:V,threshold:P}){if(u===v)return v;if(u<v||u>p)return Xe(u,v,P)<=Xe(u,p,P)?v:p;const te=V.findIndex(ve=>u<=ve),C=V[te-1],N=V[te];return u-C<=N-u?C:N}function We(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function He(){if(typeof e.defaultDate!="string"){const u=A(!0);return u.dateHash=ge(u),u}return Re(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function Oe(){return ia(i)===!0||re.value!==null&&(re.value.values.length===0||k.value==="hour"&&I.value!==!0&&G.value[w.value===!0?"am":"pm"].values.length===0)}function ze(){const u=z.value,{top:v,left:p,width:V}=u.getBoundingClientRect(),P=V/2;return{top:v+P,left:p+P,dist:P*.7}}function ce(u){if(Oe()!==!0){if(u.isFirst===!0){Q=ze(),B=U(u.evt,Q);return}B=U(u.evt,Q,B),u.isFinal===!0&&(Q=!1,B=null,Je())}}function Je(){k.value==="hour"?k.value="minute":e.withSeconds&&k.value==="minute"&&(k.value="second")}function U(u,v,p){const V=ra(u),P=Math.abs(V.top-v.top),te=Math.sqrt(Math.pow(Math.abs(V.top-v.top),2)+Math.pow(Math.abs(V.left-v.left),2));let C,N=Math.asin(P/te)*(180/Math.PI);if(V.top<v.top?N=v.left<V.left?90-N:270+N:N=v.left<V.left?N+90:270-N,k.value==="hour"){if(C=N/30,G.value!==null){const ve=I.value!==!0?w.value===!0:G.value.am.values.length!==0&&G.value.pm.values.length!==0?te>=v.dist:G.value.am.values.length!==0;C=Qe(C+(ve===!0?0:12),G.value[ve===!0?"am":"pm"])}else C=Math.round(C),I.value===!0?te<v.dist?C<12&&(C+=12):C===12&&(C=0):w.value===!0&&C===12?C=0:w.value===!1&&C!==12&&(C+=12);I.value===!0&&(w.value=C<12)}else C=Math.round(N/6)%60,k.value==="minute"&&he.value!==null?C=Qe(C,he.value):k.value==="second"&&J.value!==null&&(C=Qe(C,J.value));return p!==C&&et[k.value](C),C}const L={hour(){k.value="hour"},minute(){k.value="minute"},second(){k.value="second"}};function Ue(u){u.keyCode===13&&tt()}function Ie(u){u.keyCode===13&&at()}function Ge(u){Oe()!==!0&&(l.platform.is.desktop!==!0&&U(u,ze()),Je())}function pe(u){Oe()!==!0&&U(u,ze())}function ee(u){if(u.keyCode===13)k.value="hour";else if([37,39].includes(u.keyCode)){const v=u.keyCode===37?-1:1;if(G.value!==null){const p=I.value===!0?G.value.values:G.value[w.value===!0?"am":"pm"].values;if(p.length===0)return;if(r.value.hour===null)Te(p[0]);else{const V=(p.length+p.indexOf(r.value.hour)+v)%p.length;Te(p[V])}}else{const p=I.value===!0?24:12,V=I.value!==!0&&w.value===!1?12:0,P=r.value.hour===null?-v:r.value.hour;Te(V+(24+P+v)%p)}}}function ct(u){if(u.keyCode===13)k.value="minute";else if([37,39].includes(u.keyCode)){const v=u.keyCode===37?-1:1;if(he.value!==null){const p=he.value.values;if(p.length===0)return;if(r.value.minute===null)ke(p[0]);else{const V=(p.length+p.indexOf(r.value.minute)+v)%p.length;ke(p[V])}}else{const p=r.value.minute===null?-v:r.value.minute;ke((60+p+v)%60)}}}function vt(u){if(u.keyCode===13)k.value="second";else if([37,39].includes(u.keyCode)){const v=u.keyCode===37?-1:1;if(J.value!==null){const p=J.value.values;if(p.length===0)return;if(r.value.seconds===null)$e(p[0]);else{const V=(p.length+p.indexOf(r.value.second)+v)%p.length;$e(p[V])}}else{const p=r.value.second===null?-v:r.value.second;$e((60+p+v)%60)}}}function Te(u){r.value.hour!==u&&(r.value.hour=u,Se())}function ke(u){r.value.minute!==u&&(r.value.minute=u,Se())}function $e(u){r.value.second!==u&&(r.value.second=u,Se())}const et={hour:Te,minute:ke,second:$e};function tt(){w.value===!1&&(w.value=!0,r.value.hour!==null&&(r.value.hour-=12,Se()))}function at(){w.value===!0&&(w.value=!1,r.value.hour!==null&&(r.value.hour+=12,Se()))}function qe(u){const v=e.modelValue;k.value!==u&&v!==void 0&&v!==null&&v!==""&&typeof v!="string"&&(k.value=u)}function Se(){if(we.value!==null&&we.value(r.value.hour)!==!0){r.value=Re(),qe("hour");return}if(ne.value!==null&&ne.value(r.value.minute)!==!0){r.value.minute=null,r.value.second=null,qe("minute");return}if(e.withSeconds===!0&&ue.value!==null&&ue.value(r.value.second)!==!0){r.value.second=null,qe("second");return}r.value.hour===null||r.value.minute===null||e.withSeconds===!0&&r.value.second===null||je()}function je(u){const v=Object.assign({...r.value},u),p=e.calendar==="persian"?H(v.hour)+":"+H(v.minute)+(e.withSeconds===!0?":"+H(v.second):""):Jt(new Date(v.year,v.month===null?null:v.month-1,v.day,v.hour,v.minute,v.second,v.millisecond),W.value,$.value,v.year,v.timezoneOffset);v.changed=p!==e.modelValue,c("update:modelValue",p,v)}function Ze(){const u=[f("div",{class:"q-time__link "+(k.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:x.value,onClick:L.hour,onKeyup:ee},M.value.hour),f("div",":"),f("div",de.value===!0?{class:"q-time__link "+(k.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:x.value,onKeyup:ct,onClick:L.minute}:{class:"q-time__link"},M.value.minute)];e.withSeconds===!0&&u.push(f("div",":"),f("div",Z.value===!0?{class:"q-time__link "+(k.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:x.value,onKeyup:vt,onClick:L.second}:{class:"q-time__link"},M.value.second));const v=[f("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},u)];return I.value===!1&&v.push(f("div",{class:"q-time__header-ampm column items-between no-wrap"},[f("div",{class:"q-time__link "+(w.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:x.value,onClick:tt,onKeyup:Ue},"AM"),f("div",{class:"q-time__link "+(w.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:x.value,onClick:at,onKeyup:Ie},"PM")])),f("div",{class:"q-time__header flex flex-center no-wrap "+d.value},v)}function nt(){const u=r.value[k.value];return f("div",{class:"q-time__content col relative-position"},[f(Pe,{name:"q-transition--scale"},()=>f("div",{key:"clock"+k.value,class:"q-time__container-parent absolute-full"},[f("div",{ref:z,class:"q-time__container-child fit overflow-hidden"},[sa(f("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Ge,onMousedown:pe},[f("div",{class:"q-time__clock-circle fit"},[f("div",{class:"q-time__clock-pointer"+(r.value[k.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:se.value}),Ve.value.map(v=>f("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${v.index}`+(v.val===u?" q-time__clock-position--active "+d.value:v.disable===!0?" q-time__clock-position--disable":"")},[f("span",v.label)]))])]),Ne.value)])])),e.nowBtn===!0?f(R,{class:"q-time__now-button absolute",icon:l.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:x.value,onClick:be}):null])}return i.proxy.setNow=be,()=>{const u=[nt()],v=Pt(o.default);return v!==void 0&&u.push(f("div",{class:"q-time__actions"},v)),e.name!==void 0&&e.disable!==!0&&S(u,"push"),f("div",{class:q.value,tabindex:-1},[Ze(),f("div",{class:"q-time__main col overflow-auto"},u)])}}}),Qa={class:"q-mb-lg row items-center"},za={class:"text-bold text-h4 q-ma-none"},Ua={class:"col-12 col-md-8"},Za={class:"row q-col-gutter-md"},La={class:"col-12"},Ra={key:0,class:"col-12"},Ka={class:"col-12"},Xa={class:"col-12 fixed-toolbar"},Wa={key:0,class:"text-negative"},Ja={class:"col-12 col-md-4"},Ga={class:"row"},en={class:"col-12 q-gutter-md"},tn={key:0,class:"row q-gutter-xs items-center"},an=j("span",null,"Autor:",-1),nn={class:"text-bold"},ln={class:"row q-gutter-xs items-center"},on=j("span",null,"Visibilidade:",-1),un={class:"text-bold"},rn={key:1,class:"row q-gutter-xs items-center"},sn=j("span",null,"Publicado em:",-1),dn={class:"text-bold"},cn={class:"row items-start"},vn={key:2,class:"row q-gutter-xs items-center"},fn=j("span",null,"Criado em:",-1),mn={class:"text-bold"},hn={key:3,class:"row q-gutter-xs items-center"},gn=j("span",null,"Atualizado em:",-1),yn={class:"text-bold"},bn={key:4,class:"row q-gutter-xs items-center"},Mn=j("span",null,"Arquivado em:",-1),Dn={class:"text-bold"},_n={class:"row items-center"},wn=["onClick"],Rn=da({__name:"Post",props:{post:{type:Object},categories:{type:Array,required:!0},tags:{type:Array}},setup(e){var B,z,W,$,me,oe,k,r;const o=pa(),c=X([]),i=X(),l=ca({_method:e.post?"PUT":"POST",title:((B=e.post)==null?void 0:B.title)??"",slug:((z=e.post)==null?void 0:z.slug)??"",caption:((W=e.post)==null?void 0:W.caption)??"",content:(($=e.post)==null?void 0:$.content)??"",category_id:((me=e.post)==null?void 0:me.category.id)??null,tags:((oe=e.post)==null?void 0:oe.tags.map(w=>w.name))??[],banner:void 0,published:((k=e.post)==null?void 0:k.published)??!1,published_at:((r=e.post)==null?void 0:r.published_at)??null}),s=[["bold","italic","strike","underline","subscript","superscript"],[{icon:o.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},"quote","unordered","ordered","outdent","indent"],["hr","link",{icon:o.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{icon:o.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["undo","redo","fullscreen","viewsource"]],x=()=>o.dialog({component:St}),d=w=>o.dialog({component:St,componentProps:{categoryId:w}}),D=()=>{c.value=[]},A=(w,q,M)=>{if(w.length<=2)return M();axios.get(route("tags.index"),{params:{search:w}}).then(I=>{const{body:se}=I.data;q(()=>{c.value=se})}).catch(()=>M())},g=()=>{const w=e.post?route("posts.update",{id:e.post.id}):route("posts.store"),q=e.post?{"X-Reload":"true"}:void 0;l.post(w,{headers:q})},S=w=>{if(w.target.nodeName==="INPUT"||!i.value)return;let q,M;w.preventDefault(),w.stopPropagation(),w.originalEvent&&w.originalEvent.clipboardData.getData?(q=w.originalEvent.clipboardData.getData("text/plain"),i.value.runCmd("insertText",q)):w.clipboardData&&w.clipboardData.getData?(q=w.clipboardData.getData("text/plain"),i.value.runCmd("insertText",q)):window.clipboardData&&window.clipboardData.getData&&(M||(M=!0,i.value.runCmd("ms-pasteTextOnly",q)),M=!1)},Q=b(()=>e.post?"Editar post":"Novo post");return(w,q)=>(le(),Me(ma,null,[O(_(ha),{title:Q.value},null,8,["title"]),O(_a,null,{default:K(()=>[j("section",Qa,[j("h2",za,ie(Q.value),1)]),j("section",null,[O(xa,{onSubmit:kt(g,["prevent"]),class:"row q-col-gutter-md"},{default:K(()=>[j("div",Ua,[j("section",Za,[j("div",La,[O(gt,{"hide-bottom-space":"",outlined:"",dense:"",onBlur:q[0]||(q[0]=M=>_(l).clearErrors()),modelValue:_(l).title,"onUpdate:modelValue":q[1]||(q[1]=M=>_(l).title=M),label:"Título",error:!!_(l).errors.title,"error-message":_(l).errors.title},null,8,["modelValue","error","error-message"])]),e.post?(le(),Me("div",Ra,[O(gt,{"hide-bottom-space":"",outlined:"",dense:"",onBlur:q[2]||(q[2]=M=>_(l).clearErrors()),modelValue:_(l).slug,"onUpdate:modelValue":q[3]||(q[3]=M=>_(l).slug=M),label:"Slug",error:!!_(l).errors.slug,"error-message":_(l).errors.slug},null,8,["modelValue","error","error-message"])])):fe("",!0),j("div",Ka,[O(gt,{"hide-bottom-space":"",dense:"",onBlur:q[4]||(q[4]=M=>_(l).clearErrors()),outlined:"",modelValue:_(l).caption,"onUpdate:modelValue":q[5]||(q[5]=M=>_(l).caption=M),label:"Legenda",type:"textarea",rows:3,error:!!_(l).errors.caption,"error-message":_(l).errors.caption},null,8,["modelValue","error","error-message"])]),j("div",Xa,[O(_(qa),{ref_key:"editorRef",ref:i,"hide-bottom-space":"",modelValue:_(l).content,"onUpdate:modelValue":q[6]||(q[6]=M=>_(l).content=M),dense:_(o).screen.lt.md,onBlur:q[7]||(q[7]=M=>_(l).clearErrors()),onPaste:S,toolbar:s,"toolbar-bg":_(l).errors.content?"negative":"","toolbar-text-color":_(l).errors.content?"white":""},null,8,["modelValue","dense","toolbar-bg","toolbar-text-color"]),_(l).errors.content?(le(),Me("small",Wa,ie(_(l).errors.content),1)):fe("",!0)])])]),j("div",Ja,[j("section",Ga,[j("div",en,[O(ut,{"model-value":"",label:"Publicar"},{footer:K(()=>{var M;return[e.post?(le(),ot(R,{key:0,disable:_(l).processing,dense:"",flat:"","no-caps":"",unelevated:"",label:e.post.deleted_at?"Remover permanentemente":"Remover",color:"negative",onClick:q[10]||(q[10]=()=>{var I;return _(ga).delete(w.$route("posts.destroy",{id:(I=e.post)==null?void 0:I.id}))})},null,8,["disable","label"])):fe("",!0),O(wa),e.post?(le(),ot(_(ya),{key:1,href:w.$route("blog.show",{slug:(M=e.post)==null?void 0:M.slug}),class:"q-mr-sm text-reset"},{default:K(()=>[O(R,{disable:_(l).processing,dense:"",round:"",unelevated:"",icon:"visibility",size:"md"},null,8,["disable"])]),_:1},8,["href"])):fe("",!0),O(R,{percentage:_(l).progress?_(l).progress.percentage:100,disable:_(l).processing,dense:"","no-caps":"",onClick:g,unelevated:"",color:"primary"},{default:K(()=>[yt(ie(e.post?"Atualizar":"Publicar"),1)]),_:1},8,["percentage","disable"])]}),default:K(()=>[e.post&&e.post.author?(le(),Me("div",tn,[O(Fe,{name:"person",color:"grey-8"}),an,j("span",nn,ie(e.post.author.name),1)])):fe("",!0),j("div",ln,[O(Fe,{name:"visibility",color:"grey-8"}),on,j("div",null,[j("span",un,ie(_(l).published?"Público":"Privado"),1),O(R,{dense:"",icon:"edit",size:"sm",round:"",flat:""},{default:K(()=>[O(Ct,{modelValue:_(l).published,"onUpdate:modelValue":q[8]||(q[8]=M=>_(l).published=M),"auto-save":""},{default:K(M=>[O(va,{modelValue:M.value,"onUpdate:modelValue":I=>M.value=I,label:"Público"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})])]),_(l).published_at?(le(),Me("div",rn,[O(Fe,{name:"event",color:"grey-8"}),sn,j("span",dn,ie(_(rt)(_(l).published_at)),1),O(R,{dense:"",icon:"edit",size:"sm",round:"",flat:""},{default:K(()=>[O(Ct,{modelValue:_(l).published_at,"onUpdate:modelValue":q[9]||(q[9]=M=>_(l).published_at=M),"auto-save":"",class:"q-pa-none"},{default:K(M=>[j("div",cn,[O(Fa,{modelValue:M.value,"onUpdate:modelValue":I=>M.value=I,mask:"YYYY-MM-DD HH:mm",color:"primary",dense:""},null,8,["modelValue","onUpdate:modelValue"]),O(Na,{modelValue:M.value,"onUpdate:modelValue":I=>M.value=I,mask:"YYYY-MM-DD HH:mm",color:"primary",dense:""},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["modelValue"])]),_:1})])):fe("",!0),e.post&&e.post.created_at?(le(),Me("div",vn,[O(Fe,{name:"event",color:"grey-8"}),fn,j("span",mn,ie(_(rt)(e.post.created_at)),1)])):fe("",!0),e.post&&e.post.updated_at?(le(),Me("div",hn,[O(Fe,{name:"event",color:"grey-8"}),gn,j("span",yn,ie(_(rt)(e.post.updated_at)),1)])):fe("",!0),e.post&&e.post.deleted_at?(le(),Me("div",bn,[O(Fe,{name:"event",color:"grey-8"}),Mn,j("span",Dn,ie(_(rt)(e.post.deleted_at)),1)])):fe("",!0)]),_:1}),O(ut,{"error-message":_(l).errors.banner,label:"Capa"},{footer:K(()=>[O(Sa,{modelValue:_(l).banner,"onUpdate:modelValue":q[11]||(q[11]=M=>_(l).banner=M)},{button:K(({getFile:M,previewSrc:I})=>{var se,de;return[I?(le(),ot(qt,{key:0,class:"q-mb-md rounded-borders",src:I},null,8,["src"])):(se=e.post)!=null&&se.banner?(le(),ot(qt,{key:1,class:"q-mb-md rounded-borders",src:(de=e.post)==null?void 0:de.banner},null,8,["src"])):fe("",!0),O(R,{dense:"",onClick:M,"no-caps":"",flat:"",color:"primary"},{default:K(()=>{var Z;return[yt(ie(I||(Z=e.post)!=null&&Z.banner?"Alterar":"Adicionar"),1)]}),_:2},1032,["onClick"])]}),_:1},8,["modelValue"])]),_:1},8,["error-message"]),O(ut,{label:"Tags"},{default:K(()=>[O(_(ka),{placeholder:"Adicionar tag",dense:"",outlined:"",class:"full-width","hide-bottom-space":"","input-debounce":200,onFilter:A,onFilterAbort:D,options:c.value,"option-label":"name","option-value":"id",modelValue:_(l).tags,"onUpdate:modelValue":q[12]||(q[12]=M=>_(l).tags=M),error:!!_(l).errors.tags,"error-message":_(l).errors.tags,"use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","new-value-mode":"add-unique"},null,8,["options","modelValue","error","error-message"])]),_:1}),O(ut,{"error-message":_(l).errors.category_id,label:"Categoria"},{footer:K(()=>[O(R,{onClick:x,dense:"","no-caps":"",flat:"",color:"primary"},{default:K(()=>[yt(" Adicionar ")]),_:1})]),default:K(()=>[O(fa,{modelValue:_(l).category_id,"onUpdate:modelValue":q[13]||(q[13]=M=>_(l).category_id=M),dense:"",type:"radio",size:"sm",options:e.categories.map(M=>({label:M.name,value:M.id})),color:"primary"},{label:K(M=>[j("div",_n,[j("span",{onClick:kt(()=>d(M.value),["prevent","stop"]),class:"text-underline-hover"},ie(M.label),9,wn)])]),_:1},8,["modelValue","options"])]),_:1},8,["error-message"])])])])]),_:1},8,["onSubmit"])])]),_:1})],64))}});export{Rn as default};
