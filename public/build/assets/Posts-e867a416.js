import{Q as q}from"./QSpace-ef68f915.js";import{d as B,r as P,o,g as R,a,u as s,w as e,b as h,c as i,i as k,j as c,f as w,E as f,C as m,G as S,t as T,F as V,O as u,Z as x,l as y}from"./app-4bd7a571.js";import{f as z,g as A,a as N,c as v,d as b,C as g}from"./ClosePopup-a7cda1cb.js";import{Q as _,a as D}from"./QTable-30e3fad6.js";import{_ as E}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-08c0083b.js";import"./position-engine-7bbc9344.js";import"./use-fullscreen-655c1c23.js";import"./QChip-2b8c1d1b.js";import"./AppLogo-b47dd2df.js";import"./use-quasar-cf14f4fd.js";import"./notify-37d3cad0.js";const F={class:"q-mb-lg q-col-gutter-lg row items-center"},I=h("h2",{class:"text-bold text-h4 q-ma-none"},"Todos os Posts",-1),W=B({__name:"Posts",props:{posts:{type:Array,required:!0},pagination:{type:Object,required:!0},active:{type:Boolean,default:()=>!0}},setup(n){const C=[{name:"title",field:"title",label:"Título",align:"left",sortable:!0},{name:"category",field:t=>t.category.name,label:"Categoria",align:"left"},{name:"author",field:t=>t.author.name,label:"Autor",align:"left"},{name:"views_count",field:"views_count",label:"Visualizações",align:"center",sortable:!0},{name:"published",field:"published",label:"Publicado",align:"center",sortable:!0},{name:"actions",field:t=>t,label:"Ações",align:"center"}],r=P(!1),Q=t=>{const{page:d,rowsPerPage:l,sortBy:p,descending:$}=t.pagination;r.value=!0,u.reload({only:["posts","pagination"],preserveState:!0,data:{page:d,rowsPerPage:l,sortBy:p,descending:$,active:n.active},onFinish:()=>r.value=!1})};return(t,d)=>(o(),R(V,null,[a(s(x),{title:"Todos os Posts"}),a(E,null,{default:e(()=>[h("section",F,[I,t.$q.screen.gt.xs?(o(),i(q,{key:0})):k("",!0),a(z,{unelevated:"",flat:""},{default:e(()=>[a(c,{color:"secondary",outline:!n.active,disable:r.value||n.active,label:"Ativos",unelevated:"","no-caps":"",onClick:d[0]||(d[0]=()=>s(u).reload({data:{active:!0}}))},null,8,["outline","disable"]),a(c,{color:"secondary",outline:n.active,disable:r.value||!n.active,label:"Arquivados",unelevated:"","no-caps":"",onClick:d[1]||(d[1]=()=>s(u).reload({data:{active:!1}}))},null,8,["outline","disable"])]),_:1}),a(s(y),{href:t.$route("posts.create")},{default:e(()=>[a(c,{color:"primary",disable:r.value,label:"Novo",unelevated:"","no-caps":""},null,8,["disable"])]),_:1},8,["href"])]),h("section",null,[(o(),i(s(D),{flat:"",class:"full-width sticky-last-column",bordered:"",key:(+new Date).toString(36),onRequest:Q,"rows-per-page-options":[5,10,25,50],loading:r.value,"binary-state-sort":"",rows:n.posts,pagination:n.pagination,columns:C,"row-key":"id"},{"body-cell-published":e(l=>[a(_,{props:l},{default:e(()=>[l.value?(o(),i(w,{key:0,name:"check",size:"xs",color:"green"})):(o(),i(w,{key:1,name:"close",size:"xs",color:"red"}))]),_:2},1032,["props"])]),"body-cell-actions":e(l=>[a(_,{props:l},{default:e(()=>[a(c,{icon:"more_horiz",flat:"",round:""},{default:e(()=>[a(A,null,{default:e(()=>[a(N,{dense:"",style:{"min-width":"100px"}},{default:e(()=>[a(s(y),{href:t.$route("blog.show",{slug:l.value.slug})},{default:e(()=>[f((o(),i(v,{dense:"",clickable:""},{default:e(()=>[a(b,null,{default:e(()=>[m("Visualizar")]),_:1})]),_:1})),[[g]])]),_:2},1032,["href"]),a(s(y),{href:t.$route("posts.edit",{id:l.value.id})},{default:e(()=>[f((o(),i(v,{dense:"",clickable:""},{default:e(()=>[a(b,null,{default:e(()=>[m("Editar")]),_:1})]),_:1})),[[g]])]),_:2},1032,["href"]),l.value.deleted_at?f((o(),i(v,{key:0,onClick:p=>s(u).post(t.$route("posts.restore",{id:l.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:""},{default:e(()=>[a(b,null,{default:e(()=>[m("Restaurar")]),_:1})]),_:2},1032,["onClick"])),[[g]]):k("",!0),a(S),f((o(),i(v,{onClick:p=>s(u).delete(t.$route("posts.destroy",{id:l.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:"",class:"text-red-8"},{default:e(()=>[a(b,null,{default:e(()=>[m(T(l.value.deleted_at?"Remover permanentemente":"Remover"),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[g]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["loading","rows","pagination"]))])]),_:1})],64))}});export{W as default};
