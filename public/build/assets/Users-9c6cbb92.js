import{Q}from"./QSpace-c704b7d6.js";import{d as q,r as B,o as n,g as $,a as e,u as s,w as a,b as y,c as d,i as k,j as c,E as f,C as v,G as N,t as x,F as R,H as S,O as u,Z as T,l as _}from"./app-e548c84a.js";import{f as j,g as A,a as D,c as g,d as b,C as p}from"./ClosePopup-c3a5f5fe.js";import{Q as E,a as O}from"./QTable-5adc2525.js";import{_ as V}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-f52e2469.js";import{f as F}from"./functions-56b367dd.js";import"./position-engine-e5923866.js";import"./use-fullscreen-9051b035.js";import"./QChip-12693b9e.js";import"./AppLogo-b8cc0c28.js";import"./use-quasar-5d9c5228.js";import"./notify-f24ed34c.js";const P={class:"q-mb-lg q-col-gutter-lg row items-center"},U=y("h2",{class:"text-bold text-h4 q-ma-none"},"Todos os Usuários",-1),ee=q({__name:"Users",props:{users:{type:Array,required:!0},pagination:{type:Object,required:!0},active:{type:Boolean,default:()=>!0},roles:{type:Object,required:!0}},setup(l){const h=[{name:"name",field:"name",label:"Nome",align:"left",sortable:!0},{name:"role",field:t=>l.roles[t.role],label:"Tipo",align:"left"},{name:"email",field:"email",label:"Email",align:"left"},{name:"last_login_at",field:"last_login_at",format:t=>t?S(t).fromNow():"-",label:"Último login",align:"center"},{name:"created_at",field:"created_at",format:F,label:"Criado em",align:"center",sortable:!0},{name:"actions",field:t=>t,label:"Ações",align:"center"}],r=B(!1),w=t=>{const{page:i,rowsPerPage:o,sortBy:m,descending:C}=t.pagination;r.value=!0,u.reload({only:["users","pagination"],preserveState:!0,data:{page:i,rowsPerPage:o,sortBy:m,descending:C,active:l.active},onFinish:()=>r.value=!1})};return(t,i)=>(n(),$(R,null,[e(s(T),{title:"Todos os Usuários"}),e(V,null,{default:a(()=>[y("section",P,[U,t.$q.screen.gt.xs?(n(),d(Q,{key:0})):k("",!0),e(j,{unelevated:"",flat:""},{default:a(()=>[e(c,{color:"secondary",outline:!l.active,disable:r.value||l.active,label:"Ativos",unelevated:"","no-caps":"",onClick:i[0]||(i[0]=()=>s(u).reload({data:{active:!0}}))},null,8,["outline","disable"]),e(c,{color:"secondary",outline:l.active,disable:r.value||!l.active,label:"Arquivados",unelevated:"","no-caps":"",onClick:i[1]||(i[1]=()=>s(u).reload({data:{active:!1}}))},null,8,["outline","disable"])]),_:1}),e(s(_),{class:"text-reset",href:t.$route("users.create")},{default:a(()=>[e(c,{color:"primary",disable:r.value,label:"Novo",unelevated:"","no-caps":""},null,8,["disable"])]),_:1},8,["href"])]),y("section",null,[(n(),d(s(O),{flat:"",class:"full-width sticky-last-column",bordered:"",key:(+new Date).toString(36),onRequest:w,"rows-per-page-options":[5,10,25,50],loading:r.value,"binary-state-sort":"",rows:l.users,pagination:l.pagination,columns:h,"row-key":"id"},{"body-cell-actions":a(o=>[e(E,{props:o},{default:a(()=>[e(c,{icon:"more_horiz",flat:"",round:""},{default:a(()=>[e(A,null,{default:a(()=>[e(D,{dense:"",style:{"min-width":"100px"}},{default:a(()=>[e(s(_),{class:"text-reset",href:t.$route("users.edit",{id:o.value.id})},{default:a(()=>[f((n(),d(g,{dense:"",clickable:""},{default:a(()=>[e(b,null,{default:a(()=>[v("Editar")]),_:1})]),_:1})),[[p]])]),_:2},1032,["href"]),o.value.deleted_at?f((n(),d(g,{key:0,onClick:m=>s(u).post(t.$route("users.restore",{id:o.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:""},{default:a(()=>[e(b,null,{default:a(()=>[v("Restaurar")]),_:1})]),_:2},1032,["onClick"])),[[p]]):k("",!0),e(N),f((n(),d(g,{onClick:m=>s(u).delete(t.$route("users.destroy",{id:o.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:"",class:"text-red-8"},{default:a(()=>[e(b,null,{default:a(()=>[v(x(o.value.deleted_at?"Remover permanentemente":"Remover"),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[p]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["loading","rows","pagination"]))])]),_:1})],64))}});export{ee as default};
