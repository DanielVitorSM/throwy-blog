import{Q as T}from"./QSpace-5f067959.js";import{d as V,r as q,T as N,M as $,o as d,c as u,w as l,a as t,N as E,P as h,b as m,t as P,e as H,Q as w,u as a,i as k,R as M,j as f,E as C,S as A,g as F,f as x,C as I,G as O,F as Y,H as j,O as _,Z as z}from"./app-4c8c8e86.js";import{Q as S,a as X}from"./QTable-c79027b5.js";import{C as Q,g as U,a as G,c as B,d as D}from"./ClosePopup-bb4ff389.js";import{_ as K}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-cc237e01.js";import{u as L}from"./use-quasar-d79bd731.js";import{Q as Z}from"./QForm-4055b008.js";import{u as J}from"./use-dialog-plugin-component-c06732eb.js";import"./use-fullscreen-6c8aadaa.js";import"./QChip-c0d48c18.js";import"./position-engine-18ae27bf.js";import"./AppLogo-21433e18.js";import"./notify-a2b33b64.js";const W={class:"text-h6"},R=V({__name:"EditTag",props:{tagId:String},setup(n){const i=q(!1),{dialogRef:g,onDialogCancel:y,onDialogHide:p,onDialogOK:b}=J(),e=N({name:"",slug:""});$(()=>{n.tagId&&(i.value=!0,axios.get(route("tags.show",{id:n.tagId})).then(s=>{const{body:o}=s.data;e.name=o.name,e.slug=o.slug}).catch(()=>p()).finally(()=>i.value=!1))});const r=()=>{const s=n.tagId?route("tags.update",{id:n.tagId}):route("tags.store"),o=n.tagId?"put":"post";e[o](s,{onSuccess:()=>b(),headers:{"X-Reload":"1"}})},v=()=>{e.delete(route("tags.destroy",{id:n.tagId}),{onSuccess:()=>b(),headers:{"X-Reload":"1"}})};return(s,o)=>(d(),u(A,{ref_key:"dialogRef",ref:g,onHide:a(p),persistent:a(e).processing},{default:l(()=>[t(E,{style:{"max-width":"350px",width:"100%"}},{default:l(()=>[t(h,null,{default:l(()=>[m("div",W,P(n.tagId?"Editar tag":"Adicionar tag"),1)]),_:1}),t(Z,{onSubmit:o[4]||(o[4]=H(()=>r(),["prevent"]))},{default:l(()=>[t(h,{class:"q-pt-none q-gutter-md"},{default:l(()=>[t(w,{dense:"",modelValue:a(e).name,"onUpdate:modelValue":o[0]||(o[0]=c=>a(e).name=c),loading:i.value,autofocus:"",disabled:a(e).processing,label:"Nome",error:!!a(e).errors.name,outlined:"",onBlur:o[1]||(o[1]=c=>a(e).clearErrors()),"hide-bottom-space":"","error-message":a(e).errors.name},null,8,["modelValue","loading","disabled","error","error-message"]),n.tagId?(d(),u(w,{key:0,dense:"",onBlur:o[2]||(o[2]=c=>a(e).clearErrors()),modelValue:a(e).slug,"onUpdate:modelValue":o[3]||(o[3]=c=>a(e).slug=c),loading:i.value,autofocus:"",disabled:a(e).processing,label:"Slug",error:!!a(e).errors.slug,outlined:"","hide-bottom-space":"","error-message":a(e).errors.slug},null,8,["modelValue","loading","disabled","error","error-message"])):k("",!0)]),_:1})]),_:1}),t(M,null,{default:l(()=>[n.tagId?(d(),u(f,{key:0,disable:a(e).processing,color:"negative",onClick:v,flat:"",label:"Remover"},null,8,["disable"])):k("",!0),t(T),C(t(f,{disable:a(e).processing,onClick:a(y),flat:"",label:"Cancelar"},null,8,["disable","onClick"]),[[Q]]),t(f,{color:"primary",onClick:r,disable:a(e).processing||i.value,flat:"",label:"Salvar"},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide","persistent"]))}}),ee={class:"q-mb-lg q-col-gutter-lg row items-center"},ae=m("h2",{class:"text-bold text-h4 q-ma-none"},"Tags",-1),pe=V({__name:"Tags",props:{tags:{type:Array,required:!0},pagination:{type:Object,required:!0}},setup(n){const i=q(!1),g=L(),y=[{name:"name",field:"name",label:"Nome",align:"left",sortable:!0},{name:"posts_count",field:"posts_count",label:"Posts",align:"center",sortable:!0},{name:"created_at",field:"created_at",label:"Criado em",format:r=>j(r).format("DD/MM/YYYY HH:mm:ss"),align:"center",sortable:!0},{name:"actions",field:r=>r,label:"Ações",align:"center"}],p=r=>{const{page:v,rowsPerPage:s,sortBy:o,descending:c}=r.pagination;i.value=!0,_.reload({only:["categories","pagination"],preserveState:!0,data:{page:v,rowsPerPage:s,sortBy:o,descending:c},onFinish:()=>i.value=!1})},b=()=>g.dialog({component:R}),e=r=>g.dialog({component:R,componentProps:{tagId:r}});return(r,v)=>(d(),F(Y,null,[t(a(z),{title:"Tag"}),t(K,null,{default:l(()=>[m("section",ee,[ae,a(g).screen.gt.xs?(d(),u(T,{key:0})):k("",!0),m("div",null,[t(f,{onClick:b,color:"primary",disable:i.value,label:"Novo",unelevated:"","no-caps":""},null,8,["disable"])])]),m("section",null,[(d(),u(a(X),{flat:"",class:"full-width sticky-last-column",bordered:"",key:(+new Date).toString(36),onRequest:p,"rows-per-page-options":[5,10,25,50],loading:i.value,"binary-state-sort":"",rows:n.tags,pagination:n.pagination,columns:y,"row-key":"id"},{"body-cell-published":l(s=>[t(S,{props:s},{default:l(()=>[s.value?(d(),u(x,{key:0,name:"check",size:"xs",color:"green"})):(d(),u(x,{key:1,name:"close",size:"xs",color:"red"}))]),_:2},1032,["props"])]),"body-cell-actions":l(s=>[t(S,{props:s},{default:l(()=>[t(f,{icon:"more_horiz",flat:"",round:""},{default:l(()=>[t(U,null,{default:l(()=>[t(G,{dense:"",style:{"min-width":"100px"}},{default:l(()=>[C((d(),u(B,{onClick:()=>e(s.value.id),dense:"",clickable:""},{default:l(()=>[t(D,null,{default:l(()=>[I("Editar")]),_:1})]),_:2},1032,["onClick"])),[[Q]]),t(O),C((d(),u(B,{onClick:o=>a(_).delete(r.$route("tags.destroy",{id:s.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:"",class:"text-red-8"},{default:l(()=>[t(D,null,{default:l(()=>[I("Remover")]),_:1})]),_:2},1032,["onClick"])),[[Q]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["loading","rows","pagination"]))])]),_:1})],64))}});export{pe as default};
