import{Q as q}from"./QSpace-ddeb61a4.js";import{d as x,r as B,o,g as P,a as t,u as s,w as e,b as h,c as i,i as k,j as c,f as Q,E as f,C as m,G as R,t as S,F as T,O as d,Z as V,l as y}from"./app-5030ba9c.js";import{b as z,C as b}from"./AppLogo-f446dfdb.js";import{Q as w}from"./QTd-4143bea9.js";import{Q as p,a as v}from"./QItem-07e05882.js";import{a as A,Q as N}from"./QResizeObserver-f0dde46e.js";import{_ as D}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-af643a16.js";import{Q as E}from"./QTable-1a499890.js";import"./position-engine-fff9eec8.js";import"./QExpansionItem-ff3665f2.js";import"./touch-5ff41afe.js";import"./format-7985d814.js";import"./use-quasar-dc29eaa5.js";import"./notify-7cd72d17.js";import"./use-fullscreen-64d58db0.js";import"./QChip-b322b801.js";const F={class:"q-mb-lg q-col-gutter-lg row items-center"},I=h("h2",{class:"text-bold text-h4 q-ma-none"},"Todos os Posts",-1),le=x({__name:"Posts",props:{posts:{type:Array,required:!0},pagination:{type:Object,required:!0},active:{type:Boolean,default:()=>!0}},setup(r){const _=[{name:"title",field:"title",label:"Título",align:"left",sortable:!0},{name:"category",field:a=>a.category.name,label:"Categoria",align:"left"},{name:"author",field:a=>a.author.name,label:"Autor",align:"left"},{name:"views_count",field:"views_count",label:"Visualizações",align:"center",sortable:!0},{name:"published",field:"published",label:"Publicado",align:"center",sortable:!0},{name:"actions",field:a=>a,label:"Ações",align:"center"}],n=B(!1),C=a=>{const{page:u,rowsPerPage:l,sortBy:g,descending:$}=a.pagination;n.value=!0,d.reload({only:["posts","pagination"],preserveState:!0,data:{page:u,rowsPerPage:l,sortBy:g,descending:$,active:r.active},onFinish:()=>n.value=!1})};return(a,u)=>(o(),P(T,null,[t(s(V),{title:"Todos os Posts"}),t(D,null,{default:e(()=>[h("section",F,[I,a.$q.screen.gt.xs?(o(),i(q,{key:0})):k("",!0),t(z,{unelevated:"",flat:""},{default:e(()=>[t(c,{color:"secondary",outline:!r.active,disable:n.value||r.active,label:"Ativos",unelevated:"","no-caps":"",onClick:u[0]||(u[0]=()=>s(d).reload({data:{active:!0}}))},null,8,["outline","disable"]),t(c,{color:"secondary",outline:r.active,disable:n.value||!r.active,label:"Arquivados",unelevated:"","no-caps":"",onClick:u[1]||(u[1]=()=>s(d).reload({data:{active:!1}}))},null,8,["outline","disable"])]),_:1}),t(s(y),{class:"text-reset",href:a.$route("posts.create")},{default:e(()=>[t(c,{color:"primary",disable:n.value,label:"Novo",unelevated:"","no-caps":""},null,8,["disable"])]),_:1},8,["href"])]),h("section",null,[(o(),i(s(E),{flat:"",class:"full-width sticky-last-column",bordered:"",key:(+new Date).toString(36),onRequest:C,"rows-per-page-options":[5,10,25,50],loading:n.value,"binary-state-sort":"",rows:r.posts,pagination:r.pagination,columns:_,"row-key":"id"},{"body-cell-published":e(l=>[t(w,{props:l},{default:e(()=>[l.value?(o(),i(Q,{key:0,name:"check",size:"xs",color:"green"})):(o(),i(Q,{key:1,name:"close",size:"xs",color:"red"}))]),_:2},1032,["props"])]),"body-cell-actions":e(l=>[t(w,{props:l},{default:e(()=>[t(c,{icon:"more_horiz",flat:"",round:""},{default:e(()=>[t(A,null,{default:e(()=>[t(N,{dense:"",style:{"min-width":"100px"}},{default:e(()=>[t(s(y),{class:"text-reset",href:a.$route("blog.show",{slug:l.value.slug})},{default:e(()=>[f((o(),i(p,{dense:"",clickable:""},{default:e(()=>[t(v,null,{default:e(()=>[m("Visualizar")]),_:1})]),_:1})),[[b]])]),_:2},1032,["href"]),t(s(y),{class:"text-reset",href:a.$route("posts.edit",{id:l.value.id})},{default:e(()=>[f((o(),i(p,{dense:"",clickable:""},{default:e(()=>[t(v,null,{default:e(()=>[m("Editar")]),_:1})]),_:1})),[[b]])]),_:2},1032,["href"]),l.value.deleted_at?f((o(),i(p,{key:0,onClick:g=>s(d).post(a.$route("posts.restore",{id:l.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:""},{default:e(()=>[t(v,null,{default:e(()=>[m("Restaurar")]),_:1})]),_:2},1032,["onClick"])),[[b]]):k("",!0),t(R),f((o(),i(p,{onClick:g=>s(d).delete(a.$route("posts.destroy",{id:l.value.id}),{headers:{"X-Reload":"true"}}),dense:"",clickable:"",class:"text-red-8"},{default:e(()=>[t(v,null,{default:e(()=>[m(S(l.value.deleted_at?"Remover permanentemente":"Remover"),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[b]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["loading","rows","pagination"]))])]),_:1})],64))}});export{le as default};
