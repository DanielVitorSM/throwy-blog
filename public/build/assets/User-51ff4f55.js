import{d as E,T as z,k as O,o as n,g as i,a as l,u as e,w as d,b as a,t as u,e as N,c as b,i as m,a3 as U,j as V,C as $,Q as g,f as v,Y as R,F as S,Z as T,O as _}from"./app-b69ccc3c.js";import{Q as j}from"./QSpace-654b85e0.js";import{Q as D}from"./QForm-b03f552f.js";import{_ as F}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-099840d7.js";import{u as I}from"./use-quasar-daa21963.js";import"./use-fullscreen-75389d89.js";import{_ as A}from"./ExpansionCard.vue_vue_type_script_setup_true_lang-936af171.js";import{_ as P}from"./Cropper.vue_vue_type_script_setup_true_lang-4182a477.js";import{f as p}from"./functions-1e89eafd.js";import"./QItem-91d9023b.js";import"./QResizeObserver-40ffc2d6.js";import"./position-engine-2451d219.js";import"./AppLogo-1bf7f7a9.js";import"./QExpansionItem-ca75eda7.js";import"./touch-5ff41afe.js";import"./format-702da16c.js";import"./notify-0d4c84f3.js";import"./QChip-f3f6b2f3.js";import"./QTooltip-901db448.js";import"./use-ratio-73183db8.js";import"./index.esm-bundler-d1d05260.js";import"./use-dialog-plugin-component-4f3461ce.js";const G={class:"q-mb-lg row items-center"},M={class:"text-bold text-h4 q-ma-none"},X={class:"col-12 col-md-8"},Y={class:"row q-col-gutter-md"},Z={class:"col-12"},H={class:"row items-center q-gutter-md"},J=["src"],K=["src"],L={class:"col-12 col-md-6"},W={class:"col-12 col-md-6"},ee={class:"col-12"},oe={class:"col-12 col-md-6"},re={class:"col-12 col-md-6"},se={class:"col-12"},te={class:"col-12 col-md-4"},ae={class:"row"},le={class:"col-12 q-gutter-md"},ne={key:0},de=a("p",{class:"q-ma-none"}," Após adicionado, o usuário estará apto a entrar no sistema utilizando as credenciais informadas. Recomenda-se que o mesmo altere sua senha após entrar pela primeira vez. ",-1),ie=[de],ue={key:1,class:"row q-gutter-xs items-center"},me=a("span",null,"Último login em:",-1),ce={class:"text-bold"},ge={key:2,class:"row q-gutter-xs items-center"},ve=a("span",null,"Criado em:",-1),pe={class:"text-bold"},fe={key:3,class:"row q-gutter-xs items-center"},be=a("span",null,"Atualizado em:",-1),Ve={class:"text-bold"},ye={key:4,class:"row q-gutter-xs items-center"},we=a("span",null,"Arquivado em:",-1),he={class:"text-bold"},Ge=E({__name:"User",props:{user:{type:Object},roles:{type:Object,required:!0}},setup(r){var h,k,B,x,q,Q;I();const o=z({_method:r.user?"PUT":"POST",name:((h=r.user)==null?void 0:h.name)??"",slug:((k=r.user)==null?void 0:k.slug)??"",description:((B=r.user)==null?void 0:B.description)??"",avatar:((x=r.user)==null?void 0:x.avatar)??"",email:((q=r.user)==null?void 0:q.email)??null,password:"",password_confirmation:"",role:((Q=r.user)==null?void 0:Q.role)??"reader"}),y=()=>{const f=r.user?route("users.update",{id:r.user.id}):route("users.store"),s=r.user?{"X-Reload":"true"}:void 0;o.post(f,{headers:s})},w=O(()=>r.user?"Editar usuário":"Novo usuário");return(f,s)=>(n(),i(S,null,[l(e(T),{title:w.value},null,8,["title"]),l(F,null,{default:d(()=>[a("section",G,[a("h2",M,u(w.value),1)]),a("section",null,[l(D,{onSubmit:N(y,["prevent"]),class:"row q-col-gutter-md"},{default:d(()=>[a("div",X,[a("section",Y,[a("div",Z,[l(P,{"aspect-ratio":1,modelValue:e(o).avatar,"onUpdate:modelValue":s[0]||(s[0]=t=>e(o).avatar=t)},{button:d(({getFile:t,previewSrc:c})=>[a("div",H,[r.user&&r.user.avatar||c?(n(),b(U,{key:0,size:"60px"},{default:d(()=>[c?(n(),i("img",{key:0,src:c},null,8,J)):r.user&&r.user.avatar?(n(),i("img",{key:1,src:r.user.avatar},null,8,K)):m("",!0)]),_:2},1024)):(n(),b(U,{key:1,size:"60px",icon:"face",color:"grey-5"})),l(V,{dense:"",onClick:t,"no-caps":"",flat:"",color:"primary"},{default:d(()=>{var C;return[$(u(c||(C=r.user)!=null&&C.avatar?"Alterar":"Adicionar"),1)]}),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])]),a("div",L,[l(g,{"hide-bottom-space":"",outlined:"",dense:"",onBlur:s[1]||(s[1]=t=>e(o).clearErrors()),modelValue:e(o).name,"onUpdate:modelValue":s[2]||(s[2]=t=>e(o).name=t),label:"Nome",error:!!e(o).errors.name,"error-message":e(o).errors.name},null,8,["modelValue","error","error-message"])]),a("div",W,[l(g,{"hide-bottom-space":"",outlined:"",dense:"",onBlur:s[3]||(s[3]=t=>e(o).clearErrors()),modelValue:e(o).slug,"onUpdate:modelValue":s[4]||(s[4]=t=>e(o).slug=t),label:"Slug",error:!!e(o).errors.slug,"error-message":e(o).errors.slug},null,8,["modelValue","error","error-message"])]),a("div",ee,[l(g,{"hide-bottom-space":"",dense:"",onBlur:s[5]||(s[5]=t=>e(o).clearErrors()),outlined:"",modelValue:e(o).email,"onUpdate:modelValue":s[6]||(s[6]=t=>e(o).email=t),label:"Email",type:"email",error:!!e(o).errors.email,"error-message":e(o).errors.email},null,8,["modelValue","error","error-message"])]),a("div",oe,[l(g,{"hide-bottom-space":"",dense:"",onBlur:s[7]||(s[7]=t=>e(o).clearErrors()),outlined:"",modelValue:e(o).password,"onUpdate:modelValue":s[8]||(s[8]=t=>e(o).password=t),label:"Senha",type:"password",error:!!e(o).errors.password,"error-message":e(o).errors.password},null,8,["modelValue","error","error-message"])]),a("div",re,[l(g,{"hide-bottom-space":"",dense:"",onBlur:s[9]||(s[9]=t=>e(o).clearErrors()),outlined:"",modelValue:e(o).password_confirmation,"onUpdate:modelValue":s[10]||(s[10]=t=>e(o).password_confirmation=t),label:"Confirmar senha",type:"password",error:!!e(o).errors.password_confirmation,"error-message":e(o).errors.password_confirmation},null,8,["modelValue","error","error-message"])]),a("div",se,[l(g,{"hide-bottom-space":"",dense:"",onBlur:s[11]||(s[11]=t=>e(o).clearErrors()),outlined:"",modelValue:e(o).description,"onUpdate:modelValue":s[12]||(s[12]=t=>e(o).description=t),label:"Descrição",type:"textarea",rows:3,error:!!e(o).errors.description,"error-message":e(o).errors.description},null,8,["modelValue","error","error-message"])])])]),a("div",te,[a("section",ae,[a("div",le,[l(A,{"model-value":"",label:"Salvar"},{footer:d(()=>[r.user?(n(),b(V,{key:0,disable:e(o).processing,dense:"",flat:"","no-caps":"",unelevated:"",label:r.user.deleted_at?"Remover permanentemente":"Remover",color:"negative",onClick:s[13]||(s[13]=()=>{var t;return e(_).delete(f.$route("users.destroy",{id:(t=r.user)==null?void 0:t.id}))})},null,8,["disable","label"])):m("",!0),l(j),l(V,{percentage:e(o).progress?e(o).progress.percentage:100,disable:e(o).processing,dense:"","no-caps":"",onClick:y,unelevated:"",color:"primary"},{default:d(()=>[$(u(r.user?"Atualizar":"Adicionar"),1)]),_:1},8,["percentage","disable"])]),default:d(()=>[r.user?m("",!0):(n(),i("div",ne,ie)),r.user&&r.user.last_login_at?(n(),i("div",ue,[l(v,{name:"event",color:"grey-8"}),me,a("span",ce,u(e(p)(r.user.last_login_at)),1)])):m("",!0),r.user&&r.user.created_at?(n(),i("div",ge,[l(v,{name:"event",color:"grey-8"}),ve,a("span",pe,u(e(p)(r.user.created_at)),1)])):m("",!0),r.user&&r.user.updated_at?(n(),i("div",fe,[l(v,{name:"event",color:"grey-8"}),be,a("span",Ve,u(e(p)(r.user.updated_at)),1)])):m("",!0),r.user&&r.user.deleted_at?(n(),i("div",ye,[l(v,{name:"event",color:"grey-8"}),we,a("span",he,u(e(p)(r.user.deleted_at)),1)])):m("",!0)]),_:1}),l(A,{"model-value":"","error-message":e(o).errors.role,label:"Tipo de Acesso"},{default:d(()=>[l(R,{modelValue:e(o).role,"onUpdate:modelValue":s[14]||(s[14]=t=>e(o).role=t),dense:"",type:"radio",size:"sm",options:Object.entries(r.roles).map(([t,c])=>({label:c,value:t})),color:"primary"},null,8,["modelValue","options"])]),_:1},8,["error-message"])])])])]),_:1},8,["onSubmit"])])]),_:1})],64))}});export{Ge as default};
